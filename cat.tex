\documentclass{article}
\usepackage{ctex}
%\usepackage{math490}
\usepackage{tikz}
\usetikzlibrary{cd}
\usepackage{amsthm}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{unicode-math} %为了花体数字
%\usepackage[bbgreekl]{mathbbol}
\usepackage[all,cmtip]{xy} %画交换图的package
\usepackage{xspace}

\usepackage{hyperref} %url
\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    filecolor=magenta,      
    urlcolor=cyan,
    pdftitle={Overleaf Example},
    pdfpagemode=FullScreen,
    }

\usepackage{titlesec}
\titleformat{\section}[block]{\color{blue}\Large\bfseries\filcenter}{}{1em}{}
\titleformat{\subsection}[hang]{\color{red}\Large\bfseries}{}{0em}{}
\usepackage[textwidth=18cm]{geometry} %页宽

%theorem,corollary,lemma
%\newtheorem{theorem}{Theorem}[section]
%\newtheorem{corollary}{Corollary}[theorem]
%\newtheorem{lemma}[theorem]{Lemma}
%\newtheorem{definition}[theorem]{Definition}
%\newtheorem{example}[theorem]{Example}

\newtheorem{theorem}{Theorem}[section]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{example}[theorem]{Example}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{remark}[theorem]{Remark}
\newtheorem{exercise}{Exercise}[section]
\newtheorem{annotation}[theorem]{Annotation}


\newcommand{\defeq}{\coloneqq}
\newcommand{\eqdef}{\eqqcolon}

% shortcuts for various fonts
\newcommand{\tbf}{\textbf}
\newcommand{\mcl}{\mathcal}
\newcommand{\mbf}{\mathbf}
\newcommand{\mbb}{\mathbb}
\newcommand{\msr}{\mathscr}
\newcommand{\mfr}{\mathfrak}
\newcommand{\msf}{\mathsf}
\newcommand{\mrm}{\mathrm}

% shortcuts for common categories
\newcommand*{\cat}[1]{\textsf{#1}\xspace}
\newcommand{\Cat}{\textsf{Cat}\xspace}
\newcommand{\CAT}{\textsf{CAT}\xspace}
\newcommand{\Set}{\textsf{Set}\xspace}
\newcommand{\Fin}{\textsf{Fin}\xspace}
\newcommand{\Top}{\textsf{Top}\xspace} % replaced logical Top ⫪
\newcommand{\Ring}{\textsf{Ring}\xspace}
\newcommand{\Field}{\textsf{Field}\xspace}
\newcommand{\Group}{\textsf{Group}\xspace}
\newcommand{\Monoid}{\textsf{Monoid}\xspace}
\newcommand{\Ab}{\textsf{Ab}\xspace}
\newcommand{\Rng}{\textsf{Rng}\xspace}
% these can only be used in math mode
% if you can come up with a macro that works in both tell me
\newcommand{\Setp}{\textsf{Set}_*}
\newcommand{\Finp}{\textsf{Fin}_*}
\newcommand{\Topp}{\textsf{Top}_*}
\newcommand*{\Mod}[1]{\textsf{Mod}_{#1}}
\newcommand*{\Mat}[1]{\textsf{Mat}_{#1}}
\newcommand*{\Vect}[1]{\textsf{Vect}_{#1}}

\newcommand{\zero}{\mbb{0}}
\newcommand{\one}{\mbb{1}}
\newcommand{\two}{\mbb{2}}
\newcommand{\three}{\mbb{3}}
\newcommand{\four}{\mbb{4}}
\newcommand{\five}{\mbb{5}}
\newcommand{\six}{\mbb{6}}
\newcommand{\seven}{\mbb{7}}
\newcommand{\eight}{\mbb{8}}
\newcommand{\nine}{\mbb{9}}

\newcommand{\Proj}{\text{\bf Proj}}
\newcommand{\Affine}{\text{\bf Affine}}

% blackboard bold shortcuts
\renewcommand{\AA}{\mathbb{A}} % replaced Angstrom symbol Å
\newcommand{\BB}{\mathbb{B}}
\newcommand{\CC}{\mathbb{C}}
\newcommand{\DD}{\mathbb{D}}
\newcommand{\FF}{\mathbb{F}}
\newcommand{\KK}{\mathbb{K}}
\newcommand{\NN}{\mathbb{N}}
\newcommand{\PP}{\mathbb{P}}
\newcommand{\QQ}{\mathbb{Q}}
\newcommand{\RR}{\mathbb{R}}
\renewcommand{\SS}{\mathbb{S}}
\newcommand{\ZZ}{\mathbb{Z}}

% sans serif shortcuts
\newcommand{\sA}{\mathsf{A}}
\newcommand{\sB}{\mathsf{B}}
\newcommand{\sC}{\mathsf{C}}
\newcommand{\sD}{\mathsf{D}}
\newcommand{\sE}{\mathsf{E}}
\newcommand{\sF}{\mathsf{F}}
\newcommand{\sG}{\mathsf{G}}
\newcommand{\sH}{\mathsf{H}}
\newcommand{\sJ}{\mathsf{J}}
\newcommand{\sP}{\mathsf{P}}

% script shortcuts -- NOT USED FOR CATEGORIES, USE mathsf
% note: cD, cH, cL, and cR were commands in an earlier version of xypic now
% considered obsolete, the file xyv2.tex still defines them, hence the
% renewcommand
\newcommand{\cA}{\mathcal{A}}
\newcommand{\cB}{\mathcal{B}}
\newcommand{\cC}{\mathcal{C}}
\newcommand{\cD}{\mathcal{D}} % see note
\newcommand{\cF}{\mathcal{F}}
\newcommand{\cG}{\mathcal{G}}
\newcommand{\cH}{\mathcal{H}} % see note
\newcommand{\cI}{\mathcal{I}}
\newcommand{\cJ}{\mathcal{J}}
\newcommand{\cP}{\mathcal{P}}
\newcommand{\cL}{\mathcal{L}} % see note
\newcommand{\cM}{\mathcal{M}}
\newcommand{\cN}{\mathcal{N}}
\newcommand{\cO}{\mathcal{O}}
\newcommand{\cS}{\mathcal{S}}
\newcommand{\cT}{\mathcal{T}}
\newcommand{\cV}{\mathcal{V}}
\newcommand{\cX}{\mathcal{X}}
\newcommand{\cY}{\mathcal{Y}}
\newcommand{\cZ}{\mathcal{Z}}

\newcommand{\mm}{\mathfrak{m}}
\newcommand{\pp}{\mathfrak{p}}
\newcommand{\qq}{\mathfrak{q}}
\newcommand{\ee}{\mathfrak{e}}

\newcommand{\bC}{{\bf C}}
\newcommand{\bD}{{\bf D}}

% shortcuts for various greek letters
\newcommand{\al}{\alpha}
\newcommand{\be}{\beta}
\newcommand{\gm}{\gamma}
\newcommand{\Gm}{\Gamma}
\newcommand{\de}{\delta}
\newcommand{\De}{\Delta}
\newcommand{\ep}{\epsilon}
\newcommand{\ze}{\zeta}
\renewcommand{\th}{\theta} % replaced thorn þ
\newcommand{\Th}{\Theta}
\newcommand{\io}{\iota}
\newcommand{\ka}{\kappa}
\newcommand{\lm}{\lambda}
\newcommand{\Lm}{\Lambda}
\newcommand{\sm}{\sigma}
\newcommand{\Sm}{\Sigma}
\newcommand{\om}{\omega}
\newcommand{\Om}{\Omega}

% for embedding text in display style math
\newcommand*{\qtextq}[1]{\quad\text{#1}\quad}
\newcommand*{\qtext}[1]{\quad\text{#1}}
\newcommand*{\textq}[1]{\text{#1}\quad}
\newcommand{\IN}{\text{ in }}
\newcommand{\AND}{\text{ and }}
\newcommand{\OR}{\text{ or }}
\newcommand{\ST}{\text{ such that }}
\newcommand{\IF}{\text{ if }}

% 1/<stuff> seems to be the most common fraction
\newcommand*{\recip}[1]{\frac{1}{#1}}
\newcommand*{\trecip}[1]{\tfrac{1}{#1}}
\newcommand*{\ipr}[2]{\left\langle{#1},{#2}\right\rangle}

\newcommand{\id}{1}
\newcommand{\op}{\textrm{op}}
\newcommand{\iso}{\textrm{iso}}
\newcommand{\nil}{\emptyset}
\newcommand{\by}{\times}
\newcommand{\emb}{\hookrightarrow}
\newcommand{\wto}{\rightharpoonup}
\newcommand{\bic}{\leftrightarrow}
\newcommand{\To}{\Rightarrow}
\newcommand*{\inv}[1]{{#1}^{-1}}

\newcommand{\Ztwo}{\ZZ\sqbraq{\sqrt{2}}}
\newcommand{\rtwo}{\sqrt{2}}
\newcommand*{\lst}[3][1]{{#2}_{#1},\dots,{#2}_{#3}}
\newcommand*{\fm}[3][i]{\{{#2}_{#1}\}_{{#1}\in{#3}}}

% function defintions
\newcommand*{\xfunc}[4]{{#2}\colon{#3}{#1}{#4}}
\newcommand*{\func}[3]{\xfunc{\to}{#1}{#2}{#3}}
\newcommand*{\Func}[3]{\xfunc{\To}{#1}{#2}{#3}}
\newcommand*{\mono}[3]{\xfunc{\rightarrowtail}{#1}{#2}{#3}}
\newcommand*{\afunc}[4]{\xfunc{\leftrightarrows}{#1}{#3}{#4}\noloc{#2}}
\newcommand*{\epic}[3]{\xfunc{\twoheadrightarrow}{#1}{#2}{#3}}
\newcommand*{\incl}[3]{\xfunc{\hookrightarrow}{#1}{#2}{#3}}
\newcommand*{\pfunc}[3]{\xfunc{\rightrightarrows}{#1}{#2}{#3}}
\newcommand*{\idfunc}[1]{\func{\id_{#1}}{#1}{#1}}
\newcommand*{\oper}[2]{\func{#1}{{#2}\by{#2}}{#2}}
\newcommand*{\nper}[3]{\func{#1}{{#2}^{#3}}{#2}}
\newcommand*{\maps}[3]{\xfunc{\mapsto}{#1}{#2}{#3}}
\newcommand*{\isom}[3]{\xfunc{\cong}{#1}{#2}{#3}}

\newcommand*{\con}[3]{{#1}\equiv{#2}\mod{#3}}
\newcommand*{\pcon}[3]{{#1}\equiv{#2}\pmod{#3}}

% auto resize delimiters
\newcommand*{\norm}[1]{\left\|{#1}\right\|}
\newcommand*{\abs}[1]{\left\lvert{#1}\right\rvert}
\newcommand*{\qty}[1]{\left({#1}\right)}
\newcommand*{\sqr}[1]{\left[{#1}\right]}
\newcommand*{\floor}[1]{\left\lfloor{#1}\right\rfloor}
\newcommand*{\ceil}[1]{\left\lceil{#1}\right\rceil}
\newcommand*{\angl}[1]{\left\langle{#1}\right\rangle}

\newcommand*{\basis}[2]{\left\{{#1}_1,\dots,{#1}_{#2}\right\}}
\newcommand*{\inlnmat}[1]{\left(\begin{smallmatrix}#1\end{smallmatrix}\right)}
\newcommand*{\dispmat}[1]{\begin{pmatrix}#1\end{pmatrix}}
\newcommand*{\adj}[1]{\!\sqr{#1}}
\newcommand*{\fld}[1]{\!\qty{#1}}
\newcommand*{\fps}[1]{\!\sqr{\!\sqr{#1}\!}}
\newcommand*{\lps}[1]{\!\qty{\!\qty{#1}\!}}

% this is the preferred way to make non-italic text for function and operator
% names; it automatically handles spacing
\DeclareMathOperator{\ob}{ob}
\DeclareMathOperator{\fin}{fin}
\DeclareMathOperator{\mor}{mor}
\DeclareMathOperator{\dom}{dom}
\DeclareMathOperator{\len}{len}
\DeclareMathOperator{\cod}{cod}
\DeclareMathOperator{\colim}{colim}
\DeclareMathOperator{\range}{range}
\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\End}{End}
\DeclareMathOperator{\Sym}{Sym}
\DeclareMathOperator{\Aut}{Aut}
\DeclareMathOperator{\Spec}{Spec}
\DeclareMathOperator{\Gal}{Gal}
\DeclareMathOperator{\ID}{id}
\DeclareMathOperator{\sgn}{sgn}
\DeclareMathOperator{\Conj}{Conj}
\DeclareMathOperator{\Sect}{Sect}

\newcommand{\redt}[1]{\textcolor{red}{#1}}
\newcommand{\bluet}[1]{\textcolor{blue}{#1}}

\title{Category Theory}
\author{maple}
\date{\today}

\begin{document}
\maketitle
\tableofcontents


\newpage
\section{Categories, Functors, Natural Transformations}

\subsection{Categories}

%https://math.stackexchange.com/questions/172966/what-are-the-differences-between-class-set-family-and-collection
\begin{definition}
\rm 一个范畴(category) $\cat{C}$ 由
\begin{itemize}
	\item a collection of objects (\bluet{如果把collection翻译成集族，我觉得在这里不对，感觉collection就是表示一堆元素(vague word)，为了避免可能出现paradox of "the set that includes all set"，因此在这里淡化用集合表示的概念})
	\item a collection of morphisms
\end{itemize}
组成. 它们满足一些基本公理
\begin{itemize}
	\item 每一个morphism都有一个domain object和codomain object, 一般表示为$\func{f}{X}{Y}$
	\item 每个object有一个identity morphism $\idfunc{X}$. 
	\item 给定两个morphism $\func{f}{X}{Y}, \func{g}{Y}{Z}$，那么morphism $\func{g \circ f }{X}{Z}$也是存在的，这个特殊的morphism $g \circ f $我们称之为composite morphism. \bluet{也就是说morphism在复合作用下也是存在的，因此可以推广至任意可复合的morphism上}.
	\item 对任意的morphism $\func{f}{X}{Y}$，满足
	$$
		f\circ\id_X = f, \id_Y \circ f = f. 
	$$
	\item morphisms之间的复合满足结合律，给定morphisms $\func{f}{X}{Y}, \func{g}{Y}{Z}, \func{h}{Z}{W}$，那么
	$$
		h \circ (g \circ f) = (h \circ g) \circ f,
	$$
\end{itemize}
\end{definition}


\begin{annotation}
\rm \redt{关于集合论对范畴论的影响} For that reason, common practice among category theorists is to work in an extension of the usual Zermelo–Fraenkel axioms of set theory, with new axioms allowing one to distinguish between “small” and “large” sets, or between sets and classes. The search for the most useful set-theoretical foundations for category theory is a fascinating topic that unfortunately would require too long of a digression to explore.
\end{annotation}


\begin{definition}
\rm \redt{一个不太准确但是形象的concrete category的定义} 如果一个范畴的object都有一个underlying set(去瞅瞅universal algebra)，每一个morphism都是两个underlying set之间映射定义的function，特别地这些function都有structure-preserving的性质，那么我们则称这个范畴是一个concrete category. 
\end{definition}

\begin{definition}
\rm A category is \redt{discrete} if every morphism is an identity.
\end{definition}

\begin{definition}
\rm A \redt{small set} is one in a fixed universe of sets. Strictly speaking, in this case one could just say “set”.
\end{definition}

\begin{definition}
\rm A category is \redt{small} if it has a small set(not proper class) of objects and a small set of morphisms.
\end{definition}


\begin{definition}
\rm A category is \redt{locally small} if between any pair of objects there is only a small set of morphisms. 
\end{definition}

\begin{definition}
\rm An \redt{isomorphism} in a category is a morphism $\func{f}{X}{Y}$ for which there exists a morphism $\func{g}{Y}{X}$ so that $gf= \id_X$ and $fg = \id_Y.$ The objects $X$ and $Y$ are \redt{isomorphic} whenever there exists an isomorphism between $X$ and $Y$, in which case one writes $X \cong Y$. 
\end{definition}

\begin{definition}
\rm An \redt{endomorphism} is a morphism whose domain equals its codomain, that is an isomorphism is called an \redt{automorphism}. 
\end{definition}

\begin{definition}
\rm A \redt{monoid} is a category with a single object. Given monoid $M$, we write $\cat{C}_{M}$ for the corresponding category with single object $\bullet$ and with $M$ as its hom-set. 
\end{definition}

\begin{annotation}
\rm 这个$\cat{C}_M$里面就$\bullet$一个object, 它的identity function就是$M$里面的identity $e$, 而$\Hom_{\cat{C}_M}(\bullet,\bullet) = M$, 即每一个morphism都是$M$中的一个element， $M$里面定义的binary operator就天然满足了我们需要的composition. 
\end{annotation}


\begin{definition}
\rm A \redt{groupid} is a category in which every morphism  is an isomorphism. 
\end{definition}

\begin{example}
\rm A group is a groupoid with one object. 

如果给定一个group $G$，与之对应的范畴我们记为$\cat{C}_G$，$\cat{C}_G$里面只有一个object，我们记为$\bullet$，$G$上每一个元素$a$对应isomorphism $\func{f}{\bullet}{\bullet}$，此时你再考虑$G$上的二元运算对应$\cat{C}_G$里面的morphism复合. 

反过来给定只含一个元素$\bullet$的groupoid $\cat{C}$，那么$\cat{C}$对应的group为$\cat{C}_G = \mor(\bullet,\bullet)$. 
\end{example}



\begin{definition}
\rm A \bluet{subcategory} D of a category C is defined by restricting to a subcollection of objects and subcollection of morphisms subject to the requirements that the subcategory D contains
the domain and codomain of any morphism in D , the identity morphism of any object in D, and the composite of any composable pair of morphisms in D.
\end{definition}

\begin{annotation}
\rm 子范畴换句话就是你拿了一个subcollection $D$，那么你要把所有pairs of objects in $D$之间的morphisms也拿出来，identity morphisms当然也不能少. 
\end{annotation}

\begin{lemma}
\rm Any category $\cat{C}$ contains a \redt{maximal groupoid} the subcategory containing all of the objects and only those morphisms that are isomorphisms. 
\end{lemma}


\begin{definition}
\rm For $\cat{C}$ any category, its \redt{arrow category} $\cat{C}^\to$ is the category such that 
\begin{enumerate}
	\item an object $a$ of $\cat{C}^\to$ is morphism $a: X\to Y$ of $\cat{C}$;
	\item a morphism $f: a \to b$ of $\cat{C}^\to$ is commutative square
	$$
	% https://tikzcd.yichuanshen.de/#N4Igdg9gJgpgziAXAbVABwnAlgFyxMJZABgBpiBdUkANwEMAbAVxiRAA0B9ARhAF9S6TLnyEUZblVqMWbAJo9+gkBmx4CRAEzkp9Zq0QdOmpULWitpSdT2zDCk3ykwoAc3hFQAMwBOEALZIZCA4EEjc1Ax0AEYwDAAKwupiID5YrgAWOCA2MgYgdIoC3n6BiMGhSNrS+mxeRcq+AVXUlYgAzJExcYnmGoYMMF7ZubWGhY6NpeGtYR1dsQlJFoZpmSM1diD1jhR8QA
\begin{tikzcd}
X_1 \arrow[d, "a"'] \arrow[rr, "f_1"] &  & X_2 \arrow[d, "b	"] \\
Y_1 \arrow[rr, "f_2"']                  &  & Y_2                 
\end{tikzcd}
	$$
	\item a composition
	$$
	% https://tikzcd.yichuanshen.de/#N4Igdg9gJgpgziAXAbVABwnAlgFyxMJZABgBpiBdUkANwEMAbAVxiRAA0B9ARhAF9S6TLnyEUZblVqMWbAJo9+gkBmx4CRAEzkp9Zq0QdOmpULWitpSdT2zDCkwLMiNKACw6bMg0YDMplWF1MWQPa2l9eU5-PikYKABzeCJQADMAJwgAWyQyEBwIJG5qBjoAIxgGAAUgi0N0rASACxwQL0jDOgCM7NzqAqRtCLsQVMUnUcycxCGBxF8S8sqa81cQBhhU1vaRsu6pov7C+cWK6tq1hubt4Z8xx2Ue6dnjj1u2BPHHg5P844BWHY+T4mU7LC5iEBXFr7XqIN5zQHvQwAY34FD4QA
\begin{tikzcd}
X_1 \arrow[d, "a"'] \arrow[rr, "f_1"] &  & X_2 \arrow[d, "b"] \arrow[rr, "g_1"] &  & X_3 \arrow[d, "c"] \\
Y_1 \arrow[rr, "f_2"']                &  & Y_2 \arrow[rr, "g_2"']               &  & Y_3               
\end{tikzcd}
	$$
\end{enumerate}
\end{definition}

\begin{annotation}
\rm 我觉得要证上面的这个composition的两条路径$f_1 \cdot g_1 \cdot c$和$a\cdot f_2 \cdot g_2$相同，得从它们分别都和$f_1 \cdot b \cdot g_2$相同来证. 

按照arrow category的定义，我们可以迭代定义构造更复杂的交换图
$$
% https://tikzcd.yichuanshen.de/#N4Igdg9gJgpgziAXAbVABwnAlgFyxMJZABgBpiBdUkANwEMAbAVxiRAB12AjJhhmHCAC+pdJlz5CKAIylpVWoxZtOPPgOGiQGbHgJEyAJgX1mrRB269+gkWN2SisgMwml5y2pub7E-SmdyNzMVK3VbLR0-KWQAFjlg5QtVaw07bXE9GMDjalMkz1SI3yyieNc891CvNIUYKABzeCJQADMAJwgAWyQyEBwIJFj0ju6kWX7BxABWEc6exD6B8bmxxeplxENqBjouGAYABUzHC3asBoALQUqQizoAfWkfEFGF7cmkZ1WFic3AxR3EBcJ4vN5DDZTWZacGIeKfRAANh2ewOxwc-hA-FaN0BBUehjB8yQ00hSAA7LcCiDCT8kMiEeS6VsyUjmQDNkyKEIgA
\begin{tikzcd}
\bullet \arrow[rrr] \arrow[rd] \arrow[dd, "a_1"'] &                                       &  & \bullet \arrow[rd] \arrow[dd, "a_2"] &                           \\
                                                  & \bullet \arrow[rrr] \arrow[dd, "b_1"] &  &                                      & \bullet \arrow[dd, "b_2"] \\
\bullet \arrow[rd] \arrow[rrr]                    &                                       &  & \bullet \arrow[rd]                   &                           \\
                                                  & \bullet \arrow[rrr]                   &  &                                      & \bullet                  
\end{tikzcd}
$$
两个侧面就是原来一阶arrow category中的commutative square, 现在整体是一个立方体了. 
\end{annotation}

\newpage
\subsection{Duality}

\begin{definition}
\rm 给定一个范畴$\cat{C}$. 对应的\redt{opposite category} $\cat{C}^\op$定义为
\begin{enumerate}
	\item 和$\cat{C}$具有相同的objects.
	\item 对任意一个morphism $f \in C$当且仅当$f^\op \in C^\op$，其中$f^\op$表示交换$f$两端的domain和codomain而得到的morphism. 
	\item 对任意object $X$，用$\id_X^\op$表示它在$\cat{C}^\op$中的identity.
	\item 对任意一对morphisms $f^\op, g^\op \in \cat{C}^\op$可复合当且仅当$g,f \in \cat{C}$可复合.    
\end{enumerate}
\end{definition}

\begin{annotation}
\rm 初始对偶范畴很有可能理解不了，因为它通常被描述将箭头反向，但是箭头是什么你根本不知道. 这里我们的目光不要总是局限在箭头上，而是箭头反向之后morphism依然保持的的对应关系，对偶范畴描述只是一种对应形式，更重要是理解两个范畴上蕴含的信息是等价的. 
\end{annotation}

\begin{theorem}
\rm \redt{duality} the statement $\sigma$ is true for $\cat{C}$ if and only if $\sigma^op$ is true for $\cat{C}^\op$. 
\end{theorem}

\begin{lemma}
\rm \redt{charaterization of isomorphism} 下述条件等价:
\begin{enumerate}
	\item $\func{f}{x}{y} \in \cat{C}$是一个isomorphism.
	\item 对于任意的$c \in C$，post-composition with $f$都会诱导出一个双射
	$$
	\func{f_*}{\mor(c,x)}{\mor(c,y)},
	$$
	即若给定$\func{h}{c}{x}$，$f_*(h) = f \circ h$.
	\item 对于任意的$c \in C$，pre-composition with $f$都会诱导处一个双射
	$$
	\func{f^*}{\mor(x,c)}{\mor(y,c)},
	$$
	即若给定$\func{h}{x}{c}$，$f^*(h) = h \circ f$.  
\end{enumerate}
\end{lemma}

\begin{proof}
\rm  (1) => (2). 假设$f$是一个isomorphism，设$f$的逆为$g$. 利用$g$同样可以构造一个函数
$$
\func{g_*}{\mor(c,y)}{\mor(c,x)}.
$$
设$\func{h}{c}{x},\func{k}{c}{y}$，于是
$$
\begin{aligned}
f_*  \circ g_*(k) = f \circ g \circ k = \id_y \circ k  = k\\
g_*  \circ f_*(h) = g \circ f \circ h = \id_x \circ k  = h\\
\end{aligned}
$$
其中仅利用了associativity和identity. 若$f_*(a) = f_*(b)$，那么通过第二个等式可以得到$a = b$，因此$f_*$是单射的; 对任意$k \in \mor(c,y)$，那么通过第一个等式，可以找到它在$f$下的一个preimage $g_*(k)$，因此$f_*$是满射. 综上$f_*$是双射. 

\rm (2) => (1). 假设$f_*$是一个双射. 当$c = y$时，此时$\func{f_*}{\mor(y,x)}{\mor(y,y)}$，那么$\id_y$肯定存在一个preimage，设这个preimage为$g$，于是$f \circ g = \id_y$. 当$c = x$时，此时$\func{f_*}{\mor(x,x)}{\mor(x,y)}$，我们考虑$\id_x$和$g \circ f$的image
$$
\begin{aligned}
f_*(\id_x) &= f \circ \id_x = f  \\
f_*(g \circ f) &= f \circ g \circ f = (f \circ g) \circ f = f 
\end{aligned}
$$
因此$f$是单射的情况下，$\id_x = g \circ f$. 综上$f$是一个isomorphism. 

(2) => (3). 假设$f_*$是一个双射. 这里我们将会利用duality的性质来证明. 我们已经证明了(1) <=> (2)，它们是对任意范畴而言的，现在我们把它放到$\cat{C}^\op$上，我们将会得到这样一个已经被证明的命题: $\func{f^\op}{y}{x}$是一个isomorphism当且仅当
\begin{center}
$\func{f_*^\op}{\mor^\op(c,y)}{\mor^\op(c,x)}$是一个双射. 
\end{center}
在这里我们用一下duality的性质，上面命题等价于: $\func{f}{x}{y}$是一个isomorphism当且仅当
\begin{center}
$\func{f^*}{\mor(y,c)}{\mor(x,c)}$是一个双射.
\end{center}
这里我们就直接完成了对(3)的证明. 
\end{proof}


\begin{definition}
\rm A morphism $\func{f}{X}{Y}$ in some category is called a \redt{monomorphism} (sometimes abbrieviated to mono, or described as being monic), if for every object $Z$ and every pair of parallel morphisms $\func{g_1,g_2}{Z}{X}$ then
$$
(f \circ g_1 = f\circ g_2)~~\Rightarrow~~ g_1 = g_2. 
$$
\end{definition}

\begin{annotation}
\rm monomorphism是集合上injective map的一般化，即$f(a) = f(b) \Rightarrow a = b$. 
\end{annotation}

\begin{definition}
\rm A morphism $\func{f}{X}{Y}$ in some category is called a \redt{epimorphism} (sometimes abbrieviated to epi, or described as being epic), if for every object $Z$ and every pair of parallel morphisms $\func{g_1,g_2}{Y}{Z}$ then
$$
(g_1 \circ f = g_2 \circ f)~~\Rightarrow~~ g_1 = g_2. 
$$
\end{definition}

\begin{annotation}
\rm epimorphism是集合上subjective map的一般化，这个要思考一下，考虑两个两个函数相同，那么就要求在任意相同的自变量下函数值相等. 例如要证明$\func{g,h}{Y}{Z}$相同，即要证明$\forall y \in Y$都有$g(y) = h(y)$，此时若$f(x)$是一个满射，那么就任意的$y$都存在一个$x$使得$y = f(x)$，因此对等式$g(f(x)) = h(f(x))$取遍$x$等价于前述命题.   
\end{annotation}

\begin{lemma}
\rm $\func{f}{x}{y}$是一个monomorphism当且仅当对任意的$c \in \cat{C}$，post-composition with $f$都会诱导出一个单射
$$
\func{f_*}{\mor(c,x)}{\mor(c,y)}.
$$
\end{lemma}

\begin{proof}
\rm 如果$f$是一个monomorphism，那么有$f \circ g_1 = f \circ g_2 \Rightarrow g_1 = g_2$，即$f_*$对应下面交换图唯一得到$f_*(g) = h \in \mor(c,y)$.
$$
% https://tikzcd.yichuanshen.de/#N4Igdg9gJgpgziAXAbVABwnAlgFyxMJZABgBpiBdUkANwEMAbAVxiRAA8QBfU9TXfIRQBGclVqMWbAJ7deIDNjwEiZYePrNWiEAGNu4mFADm8IqABmAJwgBbJGRA4ISURK1sLcyzfuIATNTODtQMdABGMAwACvzKQiAMMBY4INSaUjrGAPrC3iDWdkiBTi6IbhnaIDn+aYkRUbFKgmxWWMYAFqlcFFxAA
\begin{tikzcd}
x \arrow[r, "f"]                      & y \\
c \arrow[u, "g"] \arrow[ru, "h"'] &  
\end{tikzcd}
$$
\end{proof}

\begin{lemma}
\rm $\func{f}{x}{y}$是一个epimorphism当且仅当对任意的$c \in \cat{C}$，pre-composition with $f$都会诱导出一个满射
$$
\func{f_*}{\mor(y,c)}{\mor(x,c)}.
$$
\end{lemma}

\begin{example}
\rm If we take the subcategory of a slice category $\cat{C}/c$ containing just the monomorphisms then we get a preorder: give two monomorphisms $m,n$, we way $m \leq n$ just in case there is an commutative diagram
$$
% https://tikzcd.yichuanshen.de/#N4Igdg9gJgpgziAXAbVABwnAlgFyxMJZABgBpiBdUkANwEMAbAVxiRAA0QBfU9TXfIRQAmclVqMWbAJrdeIDNjwEiARlKrx9Zq0QgAxt3EwoAc3hFQAMwBOEALZIyIHBCSiJOto+oM6AIxgGAAV+ZSEQGyxTAAscOWs7R0R1FzdED20pPUIeRIcnalckVKzdECsjLiA
\begin{tikzcd}
X \arrow[rd, "m"'] \arrow[rr, "f"] &   & Y \arrow[ld, "n"] \\
                                   & c &                  
\end{tikzcd}
$$
if $f$ exists, is unique. 

假设$f$不唯一，那么存在$m = n \circ f_1$和$m = n \circ f_2$，于是$n = \circ f_1 = n \circ f_2$，但是$n$是monic，那么必有$f_1 = f_2$，这就矛盾了. 
\end{example}

\begin{definition}
\rm Suppose that $x \xrightarrow{s} y \xrightarrow{r} x$ are morphism so that $rs = \id_x$. The map $s$ is \redt{section} or \redt{right inverse} to $r$，while the map $r$ defines a \redt{retraction} or \redt{left inverse} to $s$. The map $s$ and $r$ express the object $x$ as a \redt{retract} of the object $y$.
\end{definition}

\begin{lemma}
\rm If a morphism has both a section and retraction then the section and the retraction are identical.
\end{lemma}

\begin{proof}
\rm 假设给定morphism $f:X \to Y$的section $s$和retraction $r$，则有
$$
% https://tikzcd.yichuanshen.de/#N4Igdg9gJgpgziAXAbVABwnAlgFyxMJZARgBoAGAXVJADcBDAGwFcYkQANEAX1PU1z5CKAEwVqdJq3YBNHnxAZseAkXLiaDFm0Qg5vfsqFEAzBsnb2XbhJhQA5vCKgAZgCcIAWyTqQOCEhkFtK6LiA0jPQARjCMAAoCKsIgWGDYsPKuHt6IYn4BiL5aISAIBiDuXoE0-khmIJEx8YnGum5Y9gAWOOHBOiBumRXZPjUF9TFgUHVFUv1Y0xHRsQlGqrqp6WzllTl5tYhBk9OIALQmvo0rLespaQtsmnPsC0O7SPvjNMczT5a6ZQU71yYzq3xgUyQ51m-wGvSuzTWyXaXR6Nm4QA
\begin{tikzcd}
Y \arrow[r, "s"] \arrow[rr, "id" description, bend right] \arrow[rrr, "s", bend left] \arrow[rrr, "r"', bend right] & X \arrow[r, "f" description] \arrow[rr, "id" description, bend left] & Y \arrow[r, "r"'] & X
\end{tikzcd}
$$ 
\end{proof}

\begin{lemma}
\rm In above case, $s$ is always a monomorphism and dually, $r$ is always an epimorphism. we call such $s$ is a \redt{split monomorphism} and $r$ \redt{split epimorphism} (\bluet{用于强调它们有某侧逆的存在}). 
\end{lemma}

\begin{example}
\rm 在选择公理的支持下，$\cat{Set}$下的epimorphism总是split epimorphism. 
\end{example}

\begin{lemma}
\rm If $\func{f}{x}{y}$ and $\func{g}{y}{z}$ are monomorphisms, then so is $\func{gf}{x}{z}$. Dually, $\func{f}{x}{y}$ and $\func{g}{y}{z}$ are epimorphism so is $\func{gf}{x}{z}$.
\end{lemma}

\begin{lemma}
\rm If $\func{f}{x}{y}$ and $\func{g}{y}{z}$ are morphisms so that $gf$ is monic, then $f$ is monic. Dually, If $\func{f}{x}{y}$ and $\func{g}{y}{z}$ are morphisms so that $gf$ is epic, then $g$ is epic.
\end{lemma}

\newpage
\subsection{Functoriality}


\begin{definition}
\rm 一个函子$F \colon \cat{C} \rightarrow \cat{D}$由两个映射组成
\begin{itemize}
 \item 每一个对象$c \in \cat{C}$,对应一个对象$Fc \in \cat{D}$。
 \item 每一个态射$f \colon c \rightarrow	c' \in \cat{C}$,对应一个态射$Ff \colon Fc \rightarrow Fc' \in \cat{D}$，所有$Ff$的domain和codomian分别对应$f$的domain和codomain。 
\end{itemize}
同时还满足两个公理（functoriality aximos）
\begin{itemize}
 	\item 对任意的composable morphisms $f,g \in \cat{C}$，则$Fg \circ Ff = F(g \circ f)$
 	\item 对任意的identity morphism $1_c \in \cat{C}$，则$F(1_c)=1_{Fc}$
\end{itemize}
通俗一点来说，函子由两个范畴之间对象的映射和态射的映射组成，这个映射同时保留了范畴上的结构，包括domains，codomain，复合律，identity。
\end{definition}


\begin{lemma}
\rm 函子保留同构关系.
\end{lemma}

\begin{proof}
定义态射$\func{f}{x}{y}$和$\func{g}{y}{x}$，且$f \circ g = 1_x,g \circ f=1_y$. 于是
$$
\begin{aligned}
F(f \circ g)=F(f) \circ F(g)= 1_{F(x)} \\
F(g \circ f)=F(g) \circ F(f)= 1_{F(y)}
\end{aligned}
$$

但是反过来并不一定成立，即如果$F(f)$是一个isomorphism，但是$f$不一定是一个isomorphism，举个很简单的例子$\func{F}{\mathbb{2}}{\mathbb{1}}$,其中$\mathbb{1}$表示只含一个object的groupoid，但是$\mathbb{2}$可以不是一个groupoid.
\end{proof}

\begin{example}
\rm 几种特殊的函子
	\begin{itemize}
		\item 对任意范畴$\cat{C}$,存在一个\redt{单位函子}（identity functor）$\func{\id_{\cat{C}}}{\cat{C}}{\cat{C}}$定义为\[\id_{\cat{C}}(\xymatrix{c\ar[r]^f&c'})=\xymatrix{c\ar[r]^f&c'}\]
		\item 对于任意的范畴$\cat{C}$和$\cat{D}$,和$\cat{D}$中某个固定的对象$d$，存在一个\redt{常量函子}（constant functor）$\func{C_{d}}{\cat{C}}{\cat{D}}$定义为\[C_{d}(\xymatrix{c\ar[r]^f&c'})=\xymatrix{d\ar[r]^{\id_d}&d}\]
		\item \redt{遗忘函子}（forgetful functor）$\func{U}{\cat{C}}{\cat{Set}}$.
		\item \redt{covariant hom-functor} 和 \redt{contravariant hom-functor} 后面有完整的介绍和证明。
	\end{itemize}
	
\end{example}


\begin{example}
\rm 如果把群（Group）看做一个对象的范畴，那么群范畴和群范畴的函子是什么？
\end{example}
首先回忆一下，群范畴只有单个对象$x$,群里面的元素对应群范畴里面的态射，其domain和codomain都是对象$x$，群里面的单位元对应群范畴里面的$1_x$单位态射，群元素之间的乘法运算对应态射之前的映射。

定义两个群范畴$C$和$D$,他们的对象分别是$x_1$和$x_2$,他们之前存在的函子定义为$F$,很自然地$F$对对象的作用只能是$F(x_1) = x_2$，所以我们主要关注问题是$F$对态射的作用，首先对$1_x$,我们有$F(1_x)=1_{F(x)}$,即$1_{x_1}$对应$1_{x_2}$。另外还必须要求对任意态射$f \in F$有$F(dom(f))=dom(F(f))$和$F(cod(f))=cod(F(f))$，根据前面的群范畴的定义，我们知道态射$f$的domain和codomain是相等的，所以我们有$F(dom(f))=dom(F(f))=cod(F(f))=F(cod(f))=x_2$，这个要求是比较trivial的,最后我们要求如果态射$f$和$g$在$C$里面如果可以复合，则$F(fg)=F(f)F(g)$,在群范畴里面所有态射都是可复合的，所以对任意的$f$和$g$,我们都有上面的结论，所有性质都结合起来看，函子$F$保留了单位元和运算结构，还有一个trivial的封闭性，所以其实这个$F$就是一个群同态（homomorphism）


\begin{example}
\rm 函子$F: \cat{C} \rightarrow \cat{D}$并不一定会诱导出$\cat{D}$的子范畴.

定义一个顺序范畴$\cat{C}  = \mathbb{2}$，除了identity morphism之外只有一个morphism：
\[\xymatrix{0\ar[r]^f&1.}\]

所以范畴$\cat{C}$里面有三个态射$1_0,1_1,f$，然后我们再构造一个只含一个object的范畴$\cat{D}$,里面存在一个 endomorphism $g$:
\[\xymatrix{x\ar[r]^g&x.}\]
且$gg$不等于$1_x$和$g$,这很容易办到，例如$x=\{1,2,3\}$在$\cat{Set}$中，$g$表示函数$1 \rightarrow 2, 2\rightarrow 3 ,3 \rightarrow 1$,那么$gg$表示$1 \rightarrow 3, 2 \rightarrow 1 , 3 \rightarrow 2$, 很显然$gg$不等于$1_x$和$g$,但是还是一个endomorphism，这也说明endomorphism的复合还是endomorphism.

接着我们来开始构造一个函子$F$, 使得$F(0)=F(1)=x$,且
$$
\begin{aligned}
F(0_1)&=1_x \\ 
F(1_1)&=1_x \\ 
F(f)&=g
\end{aligned}
$$
$\cat{C}$中三个态射有四种复合方式，为了说明$F$是一个函子，还需要证明$F$保留了这四个复合结构
$$
\begin{aligned}
F(1_1 \circ 1_1)&=1_x \\
F(0_1 \circ 0_1)&=1_x \\
F(f \circ 0_1)&=g\\
F(1_1 \circ f)&=g
\end{aligned}
$$
很显然这是$F$的确保持了复合结构，$F$的像里面只有$1_x,g$，$gg$是可以复合的，但是$gg \notin \text{img}_F$，所以函子$F$并没有定义一个子范畴. 
\end{example}


\begin{definition}
\rm 前面定义的函子也叫\redt{同变函子}(covariant)，那么对应的一个\redt{逆变函子}(contravariant)从$\cat{C}$到$\cat{D}$为$F: \cat{C}^{\op} \rightarrow \cat{D} $,也是由两个映射组成
\begin{itemize}
	\item 每一个对象$c \in \cat{C}$,对应一个对象$F_c \in \cat{D}$.
	\item 每一个态射$f \colon c \rightarrow	c' \in \cat{C}$，对应一个态射$Ff \colon Fc' \rightarrow Fc \in \cat{D}$,所有$Ff$的domain和codomian分别对应$f$的codomain和domain.
\end{itemize}
同时也满足两个公理（functoriality aximos）
\begin{itemize}
	\item 对任意的composable morphism $f,g \in \cat{C}$，则$Ff \circ Fg = F(g \circ f)$.
	\item 对任意的identity morphism $1_c \in \cat{C}$，则$F(1_c)=1_{F_c}$.
\end{itemize}
相对于同变函子来说，$f$对应的像$Ff$的箭头反过来了，下面这个图可以很形象的描述.
\begin{center}
$\xymatrix{\cat{C}^{\op}\ar[r]^F&\cat{D}}$ \\
% https://tikzcd.yichuanshen.de/#N4Igdg9gJgpgziAXAbVABwnAlgFyxMJZABgBpiBdUkANwEMAbAVxiRAGMQBfU9TXfIRRkAjFVqMWbdgHJuvEBmx4CREeXH1mrRCABiAfU48+ywWtJjqWqbsPBZXbuJhQA5vCKgAZgCcIALZIZCA4EEgATNQ4dFgMbAF0aHBh8j7+QYjqoeGIAMzRsfG6icmpJiB+gcHRudk2OpVplRlIBTmR1pKNet7OXEA
\begin{tikzcd}
c \arrow[r, maps to] \arrow[d, "f"] & F_c                    \\
c' \arrow[r, maps to]               & F_{c'} \arrow[u, "Ff"]
\end{tikzcd}
\end{center} 
\end{definition}	

\begin{lemma}
\rm \redt{representable functor}  如果范畴$\cat{C}$是locally small的，可以用任意一个对象$c \in \cat{C}$来构造一对$\cat{C} \to \Set$的同变函子和逆变函子：
\[
	\xymatrix@-1pc{
	\cat{C}\ar[rr]^{\cat{C}(c,-)} & & \Set & \cat{C}^\op \ar^{\cat{C}(-,c)}[rr] & & \Set \\
	x\ar[dd]_{f} & \mapsto & \cat{C}(c,x)\ar[dd]^{f_*} & x\ar[dd]_{f} & \mapsto & \cat{C}(x,c) \\
	  &\mapsto & & & \mapsto & &\\
	y & \mapsto & \cat{C}(c,y) & y & \mapsto & \cat{C}(y,c)\ar[uu]_{f^*} \\
	}
	\]
\end{lemma}

\begin{proof}
首先需要给函子$\cat{C}(c,-)$和$\cat{C}(-,c)$的定义，函子$\cat{C}(c,-)$表示把
$x \in \cat{C}$映射到$\mor(c,x) \in \cat{Set}$，对偶地，函子$\cat{C}(-,c)$表示把$x \in \cat{C}$映射到$\mor(x,c) \in \cat{Set}$. 对于态射而言，$\cat{C}(c,-)$把态射$\func{f}{x}{y}$映射到$\func{f_*}{\cat{C}(c,x)}{\cat{C}(c,y)}$，对偶形式这里就不累述了，现在要证明他们确实是一个函子. 

我们来检验他们是否满足函子的公理，从两个方面出发是否保留了复合结构和单位态射:

定义$\cat{C}$中两个可复合的态射$\func{f}{x}{y},\func{g}{w}{x}$,我们需要证明$\cat{C}(c,-)(f \circ g)=\cat{C}(c,-)(f) \circ \cat{C}(c,-)(g)$. 因为$\func{f \circ g}{w}{y},$ 所以\[\func{\cat{C}(c,-)(fg)}{\cat{C}(c,-)(w)}{\cat{C}(c,-)(y)},\]而$\dom\cat{C}(c,-)(f)=\cod\cat{C}(c,-)(g)=\cat{C}(c,x),$所以\[\func{\cat{C}(c,-)(f)\cat{C}(c,-)(g)}{\cat{C}(c,-)(w)}{\cat{C}(c,-)(y)},\]完成我们的证明目标.

对于单位态射而言，我们证明目标是$\cat{C}(c,-)(1_x)=1_{\cat{C}(c,-)(x)}$, 首先对任意的对象$x\in\cat{C}$,$\func{1_x}{x}{x}$,有\[\func{\cat{C}(c,-)(1_x)}{\cat{C}(c,-)(x)}{\cat{C}(c,-)(x)},\]对应$\func{1^{*}_{x}}{\cat{C}(c,x)}{\cat{C}(c,x)}$表示post-composition with $1_x$，对任意$a\in\cat(c,x)$，$1^{*}_{x}$把$a\mapsto 1_xa$，即$a \mapsto a$,所以$1_{\cat{C}(c,-)(x)} = 1_{\cat{C}(c,x)}$，因为$1_{\cat{C}(c,x)}$就是把$a \mapsto a$,证明目标完成，

最后还需要证明$\cat{C}(-,c)$是一个逆变函子，利用对偶性质，$\func{\cat{C}^\op(c,-)}{\cat{C}^\op}{\Set}$也是一个函子，同时它也是一个逆变函子，自然地$\cat{C}^\op(c,-) = \cat{C}(-,c)$，证闭. 
\end{proof}

\begin{example}
\rm 函子$\sC^{\op}\to \sD$和函子$\sC\to \sD^{\op}$有什么区别？函子$\sC\to\sD$和函子$\sC^{\op}\to \sD^{\op}$又有什么区别？

先给结论都是没有区别的，先证函子$\sC\to\sD$和函子$\sC^{\op}\to \sD^{\op}$没有区别，定义$F$为$\sC\to\sD$的函子，即$F$满足对$\func{f}{x}{y}$和$\func{g}{w}{x}$有$F(f \circ g)=F(f) \circ F(g)$，$\sC^{\op}$和$\sC$里面的对象是相同的，态射的箭头转向，即$\func{f}{y}{x}$和$\func{g}{x}{w}$,把$F$作用在它们上$F(g \circ f)=F(g) \circ F(f)$也是成立的，其中$F(g) \in \sD^{\op}$,所以两个函子没有区别。

下面再用一个小trick $({\sC^{\op}})^{\op}=\sC$, 再用一下上面已经证明的结论$\sC^{\op}\to\sD$等价为$({\sC^{\op}})^{\op}\to\sD^{\op}$, 即$\sC\to\sD^{\op}$。

设$F \colon \cat{A} \rightarrow \cat{B},G \colon \cat{B} \rightarrow \cat{C}$是函子，定义$GF \colon \cat{A} \rightarrow \cat{C}$使得对$\cat{A}$中的任意一个对象$A$,\[A \mapsto G(F(A))\]
对$\cat{A}$中的任意一个态射$f \colon A \rightarrow B$, \[(f \colon A \rightarrow B) \mapsto (G(F(f)) \colon G(F(A)) \rightarrow G(F(b))) \]则GF是一个函子。

很自然地，因为函子可以进行复合运算，那么是否存在一个以所有范畴为对象，函子为态射的范畴? 但是遗憾的是两个范畴之间的函子的全体未必是一个集合。但是我们把目光限制在所有小范畴上时，我们的确可以得到一个以所有小范畴为对象，以小范畴之间函子为态射的范畴$\bf(Cat)$

\end{example}

\begin{definition}
\rm 设$F \colon \cat{C} \rightarrow \cat{D}$是一个函子，如果存在函子$G \colon \cat{D} \rightarrow \cat{C}$使得$GF=1_{\cat{C}},FG = 1_{\cat{D}}$,则称$F$是范畴$\cat{C}$到范畴$\cat{D}$的一个\redt{同构} (isomorphism). 换一句话来说如果存在范畴$\cat{C}$到$\cat{D}$的同构$F \colon \cat{C} \rightarrow \cat{D}$,则称范畴$\cat{C}$与$\cat{D}$是同构的. \bluet{这说明$F$是一个满射，两个范畴对象和态射是一个双射}.
\end{definition}



\begin{definition}
\rm 对任意的两个范畴 $\cat{C}$ 和 $\cat{D}$,他们的\redt{积}(product)是一个新范畴 $\cat{C} \times \cat{D}$:
\begin{itemize}
	\item 对象是有序对 $\left(c,d \right)$,其中$c$是$\cat{C}$中的一个对象，$d$是是$\cat{D}$的一个对象.
	\item 态射也是有序对 $\left(f,g \right) \colon \left(c,d\right) \rightarrow \left(c',d'\right)$，其中$f\colon c \rightarrow c' \in \cat{C}, g \colon d \rightarrow d' \in \cat{D}$.
\end{itemize}
\end{definition}

\begin{definition}
%https://encyclopediaofmath.org/wiki/Bifunctor
\rm 给定范畴$\cat{C}_1,\cat{C}_2,\cat{D}$，一个\redt{bifunctor}表示为:
\begin{center}
$F \colon \cat{C}_1 \times \cat{C}_2 \rightarrow \cat{D}$
\end{center}
这个函子的domain是两个范畴的积. 
\end{definition}


\begin{definition}
\rm \redt{射影函子}是一个特殊的bifunctor，其定义为
$$
\begin{aligned}
P_{\cat{C}} \colon \cat{C} \times \cat{D} \rightarrow \cat{C},\left( A,B \right)\mapsto A,\left( f,g \right)\mapsto f \\
P_{\cat{D}} \colon \cat{C} \times \cat{D} \rightarrow \cat{D},\left( A,B \right)\mapsto B,\left( f,g \right)\mapsto g
\end{aligned}
$$
\end{definition}



\begin{lemma}
\rm \redt{射影函子的万有性质} 对任意的范畴 $\varepsilon$ 及函子 $R\colon \varepsilon \rightarrow \cat{C}$和$T\colon \varepsilon \rightarrow \cat{D}$ ,存在唯一的函子 $F\colon \varepsilon \rightarrow \cat{C}\times\cat{D}$ 使得 $P_{\cat{C}}F=R,P_{\cat{D}}F=T$, 即下面交换图表示
% https://tikzcd.yichuanshen.de/#N4Igdg9gJgpgziAXAbVABwnAlgFyxMJZABgBpiBdUkANwEMAbAVxiRAB12BbOnACwDGjYAGEAvgAJOeLvCndeg4QBExIMaXSZc+QigBM5KrUYs2nHvyENRajVux4CRQ-uP1mrRB3b0ATjBo2AzO9iAYjrpEZG7UHmbeForWwKrqxjBQAObwRKAAZn4QXEhkIDgQSACM1Ax0AEYwDAAK2k56IAww+TggcaZeIM0A+sBJVsLidpoghcWl1BVIAMz9nmwjYwoTNqrTBUUliIbllYirJuveACrqM3NHJ0uINZcJIABKdwfzx4tnZQYWDAgygdDgfEyfTegwAYukxEA
\begin{center}
\begin{tikzcd}
\cat{C} \times \cat{D} \arrow[rr, "P_{\cat{C}}"] \arrow[dd, "P_{\cat{D}}"] &  & \cat{C}                                                           \\
                                                                                           &  &                                                                       \\
\cat{D}                                                                                &  & \varepsilon \arrow[ll, "T"] \arrow[uu, "R"] \arrow[lluu, "F", dashed]
\end{tikzcd}
\end{center}
\end{lemma}


\begin{example}
\rm 给定两个函子$\func{F}{\sD}{\sC}$和$\func{G}{\sE}{\sC}$,可以构造一个逗号范畴(comma category) $F \downarrow G$:
	\begin{enumerate}
		\item objects are triples $(d,e,\alpha)$ where $d \in D$, $e \in E$, and $\alpha: F(d) \to F(e)$ is a morphism in $C$, and and whose
		\item morphisms from $(d_1,e_1,\alpha_1)$ to $(d_2,e_2,\alpha_2)$ are pairs $(\beta,\gamma)$, where $\beta:d_1 \to d_2$ and $\gamma: e_1 \to e_2$ are morphisms in $D$ and $E$, repsectively, such that $\alpha_2 \circ F(\beta) = $
		\[\xymatrix{
					F(d_1) \ar[d]_{F(\beta)} \ar[r]^{\alpha_1} & G(e_1)\ar[d]^{G(\gamma)}  \\
			F(d_2)\ar[r]_{\alpha_2} &G(e_2)}\]
			$f'F(h) = G(k)f$
	\end{enumerate}
	同时定义了一对射影函子
	\begin{enumerate}
		\item there is a bifunctor $H_D:F\downarrow G \to D$ which sends each object $(d,e,\alpha)$ to $d$, and each pair $(\beta,\gamma)$ to $\beta$;
		\item there is a bifunctor $H_E:F\downarrow G \to E$ which sends each object $(d,e,\alpha)$ to $e$, and each pair $(\beta,\gamma)$ to $\gamma$.
	\end{enumerate}
\end{example}

首先我们要证明逗号范畴它确实是一个范畴，但这个范畴的出现就看起来非常突兀，逗号范畴提供观察morphism的另外一种视角. 逗号范畴里面的态射统一用$\qty{\func{h}{d}{d'},\func{k}{e}{e'}} \qty{f,f'}$表示，后面的括号内容特殊标识态射的domain和codomain。

要说明它是一个范畴，首先我们定义它每个对象的单位态射和态射复合：

对于任意一个对象$\qty{d,e,f}$简写为$c$,那对应的单位态射，我们定义为\[ 1_c  = \qty{1_{d},1_{e}}\qty{f,f}\]其中$1_d$和$1_e$分别为$d$和$e$的单位态射，很自然的下面正方形交换
\[\xymatrix{ &Fd \ar[d]_{F1_{d}} \ar[r]^{f} & Ge\ar[d]^{G1_{e}}
						 \\  & Fd\ar[r]_{f} &Ge   } \]
$1_c$的domain和codomain都是$\qty{d,e,f}$

再定义态射复合，对于两个形如
$$\qty{\func{h}{d}{d_1},\func{k}{e}{e_1}} \qty{f,f_1} \AND
	\qty{\func{h}{d_1}{d_2},\func{k}{e_1}{e_2}} \qty{f_1,f_2}$$ 
表示为
$$\func{\al}{(d,e,f)}{(d_1,e_1,f_1)} \AND
	\func{\be}{(d_1,e_1,f_1)}{(d_2,e_2,f_2)}.$$ $\al$和$\be$的复合表示为
\[\be  \al=\qty{\func{h'  h}{d}{d_{2}},\func{k'  k}{e}{e_{2}}}\qty{f,f_2}\]用交换图表示为\[\xymatrix{ Fd \ar[d]_{Fh} \ar[r]^{f} & Ge\ar[d]^{Gk}  \\
			Fd_{1} \ar[d]_{Fh'}\ar[r]^{f_{1}}& Ge_{1} \ar[d]^{Gk'} \\
	Fd_{2} \ar[r]^{f_{2}} &Ge_2 } \]两个正方形交换图拼成了一个长方形交换图，也可以简化为一个正方形\[\xymatrix{ &Fd \ar[d]_{Fh'  Fh}\ar[r]^{f} & Ge\ar[d]^{Gk' Gk}
			 \\  & Fd_2\ar[r]^{f_2} &Ge_2 }\]
			 
完成了单位态射和态射复合的定义，现在需要证明单位态射左右消去律(其实就是证明我们构造的单位态射确实是单位态射)和态射复合的结合性。

用$\al$表示态射$\qty{\func{h}{d}{d'},\func{k}{e}{e'}} \qty{f,f'}$其中的domain和codomain分别表示$c$和$c'$,先证明$\al 1_x$:
\begin{align*}
	\al  1_{c } &= \qty{h 1_{d},k 1_{e}}\qty{f,f'}\\
	&= \qty{h,k}\qty{f,f'} \\
	 &= \al.
\end{align*}

接着证明$1_{c'}\al$:
\begin{align*}
	1_{c' } \al &= \qty{1_{d'} h, 1_{e'} k}\qty{f,f'}\\
	&= \qty{h,k}\qty{f,f'}\\
	&= \al.
\end{align*}

最后证明态射的结合性，这里定义三个态射$\al$,$\be$和$\gm$分别表示$\qty{\func{h}{d}{d_1},\func{k}{e}{e_1}}$,\\$\qty{\func{h_1}{d_1}{d_2},\func{k_1}{e_1}{e_2}}$和$\qty{\func{h_2}{d_2}{d_3},\func{k_2}{e_2}{e_3}}$:
\begin{align*}
	(\gm\be)\al&=((h_2h_1),(k_2 k_1))(f_1,f_3) \al\\
	&=((h_2 h_1) h,(k_2 k_1) k)(f,f_3)\\
	&=(h_2(h_1 h),k_2(k_1 k))(f,f_3)\\
	&=\gm((h_1 h),(k_1 k))(f,f_2)\\
	&=\gm(\be \al).
\end{align*}

我们已经证明了逗号范畴确实是一个范畴，接下来我们定义两个函子$\func{\dom}{F \downarrow G}{\sD}$ 和 $\func{\cod}{F \downarrow G}{\sE}$，还是从$F \downarrow G$中的对象和态射出发：
\begin{align*}
	\dom\qty{d,e,f} &= d, \dom\qty{h,k}\qty{f,f'} \;\;= h \\
	\cod\qty{d,e,f} &= e, \cod\qty{h,k}\qty{f,f'} \quad= k.
\end{align*}

有了定义之后还是和上面一样证明这两个函子确实是函子，这里我就不累述了，直接给出单位态射和态射复合结构的保持:\[\dom\qty{1_{d},1_{e}}\qty{f,f} = 1_d,\cod\qty{1_{d},1_{e}}\qty{f,f} =1_e \]和\[\dom(\be \al) = \dom\qty{h'  h,k'  k}\qty{f,f_2} =h'
	 h = \dom\be  \dom\al\] \[\cod(\be \al) = \cod \qty{h' h,k' k}\qty{f,f_2}=  k'
	 k = \cod\be\cod\al.\]
	 
\begin{example}
\rm 我们来看comma category的一个特殊例子切片范畴(slice category) $c/\sC$和$\sC/c$, 其中$c$ is object of $\cat{C}$. 以$c/\cat{C}$为例.
\begin{enumerate}
	\item objects are morphisms $f$ of $C$ such that $\dom(f) = c$; 
	\item morphisms from $f:x \to c$ to $g: y \to c$ are diagram
	\[ \xymatrix{&c\ar[dr]^g
		\ar[dl]_f& \\ x \ar[rr]_h && y } \] \[\xymatrix{
					F(d) \ar[d]_{F(h)} \ar[r]^{f} & G(e)\ar[d]^{G(k)}  \\
			F(d')\ar[r]_{f'} &G(e)'}\]
	which $h: x\to y$ is morphism of $\cat{C}$.		
\end{enumerate}

上面同时列出了comma category的交换图，用于解释slice category为什么是一个特殊的comma category $F \downarrow G$. 因此需要将comma category交换图里面四个箭头变成三个箭头并且固定$c$. 首先我们想办法去掉箭头$F(h)$，限制$D$是一个trivial category(only with $\bullet$ and $1_\bullet$), 同时$F(\bullet) = c$, 则 \[\xymatrix{c \ar[d]_{1_c} \ar[r]^{f} & G(e)\ar[d]^{G(k)}  \\c\ar[r]_{f'} &G(e)'}\] 显然这里$f' \circ 1_c = f'$，我们将它变成一条对角线\[\xymatrix{c \ar[d]_{1_c} \ar[r]^{f} \ar[rd]^{f'1_c} & x\ar[d]^{k}  \\c\ar[r]_{f'} &y}\] 即马上得到我们希望的slice category $c/\cat{C}$.  
\end{example}

\begin{example}
\rm $\func{\Conj}{\Group}{\Set}$是一个函子，$\Conj$作用在单个群上表示群共轭等价类的集合，在群里面两个元素如果是共轭的，表示为存在一个n使得$a=nbn^{-1}$成立，则称$a$和$b$共轭，很容易证明这个共轭关系是一个等价关系。当把$\Conj$作用在\emph{the category of groups}上时:
	\begin{itemize}
		\item 对任意的群$s$,\(\Conj s = \hat{s}\)
		\item 对任意的群同态\(\func{f}{s}{t}\),\(\func{\Conj f}{\hat{s}}{\hat{t}}\)对任意的\([x] \in \hat{s}\),\(\Conj f([x])=[f(x)]\)
	\end{itemize}
	
为了证明Conj确实可以扩展到一个函子，得说明几个东西，如果存在一个群同态$\func{f}{s}{t}$,$a,b \in s$,且$a$和$b$共轭,那么存在一个$n$,使得$a=nbn^{-1}$ \[f(a)=f(nbn^{-1})=f(n)f(b)f(n^{-1})=f(n)f(b)f(n)^{-1}\]所以群同态是保留元素共轭结构的，这说明如果$[a]=[b]$,则$[f(a)]=[f(b)]$, 上面$\Conj f$是well-defined。

还是老步骤，需要说明indentiy和composition的保留
\begin{itemize}
	\item 对应单位态射对任意的群$s$,对象$x \in s$ \[\Conj 1_s([x])=[1_s(x)]=[x]=1_{\hat{s}}([x])=1_{\Conj s}([x]).\]这个证明感觉很迷，感觉还是要从消去律出发，但是取的是任意的$x$似乎也能说明问题$\Conj 1_s = 1_{\Conj s}$.
	\item 让$f$和$g$表示两个可复合的态射$fg$,$[x] \in dom(f)$ \[\Conj g\Conj f([x])=\Conj g([f(x)])=[g(f(x))]=[gf(x)]=\Conj (gf([x])).\]
\end{itemize}	
\end{example}


\newpage
\subsection{Naturality}
\begin{definition}
\rm 设$\cat{C}$与$\cat{D}$是两个范畴，给定两个functor $F \colon \cat{C}\rightarrow \cat{D}$与$G \colon \cat{C} \rightarrow \cat{D}$,一个\redt{自然变换}(natural transformation) $\alpha:\cat{C} \Rightarrow \cat{D}$ 由满足下述条件的morphisms组成:
\begin{itemize}
	\item For every object $X$ in $\cat{C}$, there is a morphism $\alpha_X: F(X) \to G(X)$ between objects of $\cat{D}$. The morphism $\alpha_X$ is called the component of $\alpha$ at $X$. 
	\item Components must be such that for every morphism $f:X \to Y$ in $\cat{C}$, we have bleow commutative diagram
	$$
% https://tikzcd.yichuanshen.de/#N4Igdg9gJgpgziAXAbVABwnAlgFyxMJZABgBpiBdUkANwEMAbAVxiRADEB9AYxAF9S6TLnyEUARnJVajFmwDiPfoJAZseAkTLjp9Zq0QdOwbgHI+yoetFFJO6nrmHFJ8-2kwoAc3hFQAMwAnCABbJDIQHAgkSRl9NgAdBMY0AAs6JQEA4LDECKikACZqBjoAIxgGAAVhDTEQQKwvVJwQB1kDDn9LECDQmOoCxABmdvjnbqzenKLB6JGS8sqa601DRubWsacQDNcLPgo+IA
\begin{tikzcd}
F(X) \arrow[r, "\alpha_X"] \arrow[d, "F(f)"'] & G(X) \arrow[d, "G(f)"] \\
F(Y) \arrow[r, "\alpha_Y"']                & G(Y)             
\end{tikzcd}
$$ 
\end{itemize}

注意交换图里面的所有态射都属于$\cat{D}$，如果自然变换$\alpha \colon F \rightarrow G$满足对任意的$c \in \ob\cat{C}$对应的$\alpha_{c} : F(c) \to G(c)$都是一个isomorphism，则称$\alpha$是一个\redt{自然同构}(natural isomorphism). 
\end{definition}

\begin{annotation}
\rm 这个自然变换的定义看起来还是有一些抽象，注意这些component arrows都是目标范畴的态射，所以自然变换可以形象的表示为
$$
\alpha \colon \ob\cat{C} \rightarrow \mor\cat{D}. 
$$
一个自然变换可以理解为两个函子之间morphism，最重要是理解上述交换图是如何定义这个morphism. 
\end{annotation}

\begin{lemma}
\rm \redt{natrual transform composition} 设$F,G,H \colon \cat{C} \rightarrow \cat{D}$和$T \colon \cat{D} \rightarrow \cat{C}$是函子，$\alpha \colon F \rightarrow G, \beta \colon G \rightarrow H$是自然变换，则
\begin{itemize}
 \item $\beta\alpha \colon F \rightarrow H \colon c \mapsto(F(c) \xrightarrow{\beta_c\alpha_c} H(c))$是一个自然变换
 \begin{center}
% https://tikzcd.yichuanshen.de/#N4Igdg9gJgpgziAXAbVABwnAlgFyxMJZABgBpiBdUkANwEMAbAVxiRADEB9AYxAF9S6TLnyEUARnJVajFmwDiPfoJAZseAkQBMU6vWatEIABJKBQ9aKJlx0-XKNdg3AOR9lFkZomlbe2YYgis5uHqrCGmLIOn4yBmymIe580jBQAObwRKAAZgBOEAC2SGQgOBBIknEOIAA6tYxoABZ0Zir5RZXU5Ug6IAx0AEYwDAAKEVZGDDA5OCD+8Ub1wzitvOYgHcWIfT2IAKwLNcY5YVtIACzdFQdHgcswq5xJZwXbVXtX1YHypxvniAAzNdLnc2PVGi1nq5ku03iUQUCwY4-hQ+EA
	\begin{tikzcd}
F_c \arrow[r, "\alpha_c"] \arrow[d, "Ff"] & G_c \arrow[r, "\beta_c"] \arrow[d, "Gf"] & H_c \arrow[d, "Hf"] \\
F_{c'} \arrow[r, "\alpha_{c'}"]           & G_{c'} \arrow[r, "\beta_{c'}"]           & H_{c'}             
	\end{tikzcd}
 \end{center}
	\item $\alpha T \colon FT \rightarrow GT \colon c' \mapsto (FT(c') \xrightarrow{\alpha_{T(c')}} GT(c'))$是一个自然变换
	\item $T\alpha \colon TF \rightarrow TG \colon c \mapsto (TF(c) \xrightarrow{T(\alpha_{c})} TG(c))$是一个自然变换
\end{itemize}
\end{lemma}


上面这个第一个结论是一个很显然的结论，两个交换图拼在一起还是一张交换图,所以自然变换之间是可以进行复合运算的，特殊地，每个函子$F$都存在一个自身到自身单位自然变换$1_F \colon F \rightarrow F$,其实除了上面第一个结论之外还有两个$\alpha T$和$T\alpha$函子和自然变换的复合我没有看懂，似乎domain和codamin都是函子复合。

如果$\cat{C}$和$\cat{D}$都是小范畴，则以范畴$\cat{C}$到范畴$\cat{D}$的所有函子为对象，以自然变换为态射可以形成一个范畴$[\cat{C},\cat{D}]$,称为\redt{函子范畴}. 

\begin{example}
\rm 设 $P \colon \Set \rightarrow \Set $是幂集函子，定义为
\begin{enumerate}
	\item 对任意的object $A \in \Set$，有$FA = \mathcal{P}(A)$.
	\item 对任意的morphism $\func{f}{A}{B}$，有$\func{Ff}{\mathcal{P}(A)}{\mathcal{P}(B)}$. 
\end{enumerate}
它和单位函子$1_{\Set}$构成一个自然变换，其对应的交换图为
\begin{center}
% https://tikzcd.yichuanshen.de/#N4Igdg9gJgpgziAXAbVABwnAlgFyxMJZABgBpiBdUkANwEMAbAVxiRAEEQBfU9TXfIRQAmclVqMWbAAoAKdgEpuvEBmx4CRMsPH1mrRCABCyvusFFRO6nqmG5RpV3EwoAc3hFQAMwBOEAFskMhAcCCQARhtJAxAAHTiAIxgcOgB9Th4ffyDEELCkURAGOmSGaX4NIRBfLDcACxwQaP02b1MQP0DC6gLEAGYWu3iklPSTLM6cyN7wgaHYuW8nCi4gA
\begin{tikzcd}
A \arrow[rr, "\beta_A"] \arrow[dd, "f"'] &  & \mathcal{P}(A) \arrow[dd, "P(f)"] \\
                                         &  &                         \\
B \arrow[rr, "\beta_B"]                  &  & \mathcal{P}(B)                   
\end{tikzcd}
\end{center}
\end{example}
其中$\beta_A$表示一个morphism，即集合上的一个映射: $x \in A$有$x \mapsto \{x\}$.

\newpage
\subsection{Equivalence of categories}

\begin{definition}
\rm 设$\func{F}{\cat{C}}{\cat{D}}$是一个函子，如果存在函子$\func{G}{\cat{D}}{\cat{C}}$及自然同构$\func{\al}{1_{\cat{C}}}{GF}$和$\func{\be}{1_{\cat{D}}}{FG}$,则称函子$F$是一个等价（equivalence）

% https://tikzcd.yichuanshen.de/#N4Igdg9gJgpgziAXAbVABwnAlgFyxMJZABgBpiBdUkANwEMAbAVxiRAGMQBfU9TXfIRRkAjFVqMWbdgHJuvEBmx4CREeXH1mrRCADiAMQAU7AJTy+ywWtJjqWqbsMmZ5npYGqUAZg33JOiBQFor8KkLIvnYS2mxQcu6hVl7IACx+MY4gBnpGUG4KSp4R6dEOgTl5buIwUADm8ESgAGYAThAAtkhkIDgQSOogDHQARjAMAAph1rqtWHUAFjgg-rG6zSFtnd3UfUgATKtZADrHjGgLdAD6nIlbXYiDe4i+Q6PjU8lCIHOLy0eBU7nS5XYCyLibdoPQ69fovAFsZzNAotKFIdKwpAAVmowzGk2mXh+8yWK0ygTqkO2iAxzwAbAjdKcxjhrsE7mjEDjMYgAOy494Er5sX6kxkgZkwVmg+IQjnUhk8-lvfGfYpsBgwZr-clsSp1apcIA
\begin{center}
\begin{tikzcd}
c \arrow[d, "f"'] \arrow[r, "\alpha_c"] & GF(c) \arrow[d, "GF(f)"] &  & d \arrow[d, "g"'] \arrow[r, "\beta_d"] & FG(d) \arrow[d, "FG(g)"] \\
c' \arrow[r, "\alpha_{c'}"']            & GF(c')                   &  & d' \arrow[r, "\beta_{d'}"']            & FG(d)                   
\end{tikzcd}
\end{center}


如果存在等价函子$\func{F}{\cat{C}}{\cat{D}}$,则称范畴$\cat{C}$与范畴$\cat{D}$是等价的范畴（equivalent categories）。

如果范畴$\cat{C}$和范畴$\cat{D}^{op}$等价，则称$\cat{C}$与$\cat{D}$是对偶等价的范畴（dual equivalent categories）。
\end{definition}

由于函子保持对象的同构，很容易证明范畴的等价构成了范畴之间的一个等价关系。回忆两个范畴同构的概念是指两个范畴具有完全相同的结构，但是实际应用中我们并不需要如此强的条件，等价范畴是利用自然变换给出范畴之间一种较弱的相同性。

\begin{definition}
\rm 定义一个函子$\func{F}{\cat{C}}{\cat{D}}$
	\begin{itemize}
		\item 如果对任意的$x,y \in \cat{C}$,给定的$\cat{C}(x,y) \rightarrow \cat{D}(F(x),F(y))$映射是一个满射，则这个函子是\tbf{局部满,完全的，完满的}（full）
		\item 如果对任意的$x,y \in \cat{C}$,给定的$\cat{C}(x,y) \rightarrow \cat{D}(F(x),F(y))$映射是一个单射，则这个函子是\tbf{局部单，忠实的}（faithful）
		\item 如果对任意的对象$d \in \cat{D}$,都有一个对象$c \in \cat{C}$,使得$F(c)$与$d$同构，则这个函子是\tbf{稠密的}（essentially surjective on objects）
	\end{itemize}
\end{definition}

注意full和faithful 都是相对两个范畴的hom-set来说的，所以它们都是局部条件（local condition）。在局部条件上再增强一下，如果一个函子是\tbf{嵌入}（embedding）是指如果一个faithful funtor函子，且对对象的作用也是单射，这种情况下，函子的domain范畴其实就是codomain范畴的一个子范畴，就把局部条件上升为了全局条件作用在所有箭头上。

\begin{theorem}
\rm 如果一个函子是等价的，当且仅当这个函子是faithful，full，essentially surjective on objects(dense)。
\end{theorem}

在证明这个定理之前，需要提出一个小lemma

\begin{lemma}
\rm 对于态射$\func{f}{a}{b}$和同构$a \cong a'$,$b \cong b'$,可以唯一确定态射$\func{f'}{a'}{b'}$,等价地下面四个交换图
\[\xymatrix{
	a\ar[d]_{f} & a'\ar[l]_{\cong}\ar[d]^{f'} &
	a\ar[d]_{f}\ar[r]^{\cong} & a'\ar[d]^{f'} &
	a\ar[d]_{f} & a'\ar[l]_{\cong}\ar[d]^{f'} &
	a\ar[d]_{f}\ar[r]^{\cong} & a'\ar[d]^{f'} \\
	b\ar[r]_{\cong} & b' &
	b\ar[r]_{\cong} & b' &
	b & b'\ar[l]^{\cong} &
	b & b'\ar[l]^{\cong}
	}\]
\end{lemma}
从这几个交换图上我们已经很容易构造出$f'$了,简单描述一下，定义$\func{\al}{a}{a'}$和$\func{\be}{b}{b'}$,反之它们的逆用$\al^{-1}$和$\be^{-1}$表示。第一个最为直观$f'=\be f \al^{-1}$

开始证明定理3.3。($\Longrightarrow$) 给定$\func{F}{\cat{C}}{\cat{D}}$，$\func{G}{\cat{D}}{\cat{C}}$，$\isom{\eta}{1_{\cat{C}}}{GF}$，$\isom{\mu}{1_{\cat{D}}}{FG}$定义了一个范畴间的等价关系。对于任意的$d \in D$，有$\isom{\mu_d}{FG(d)}{d}$，取$c=G(d)$,显然$F$是稠密的。再考虑两个并行的态射$\pfunc{f,g}{c}{c'}$,如果$F(f)=F(g)$,则$f$和$g$同时满足下面交换图
\[\xymatrix{
	c\ar[d]_{f\ or\ g}\ar[r]_{\cong}^{\eta_c} & GF(c)\ar[d]^{GF(f)=GF(g)}\\
	c'\ar[r]_{\eta_{c'}}^{\cong} & GF(c')
	}\]	根据lemma3.4，$c \rightarrow c'$是唯一确定的，所有$f=g$,因此$F$是一个单射.对称地，考虑$\func{f}{d}{d}$和同构$\mu_{d}$，$\mu_{d'}$,可以唯一确定$\func{k}{G(d)}{G(d')} \in \Hom_\cat{C}(X,Y) $\[\xymatrix{
	d\ar[d]_{f}\ar[r]_{\cong}^{\mu_d} & FG(d)\ar[d]^{Fk}\\
	d'\ar[r]_{\mu_{d'}}^{\cong} & FG(d')
	}\],所以F是满射。
	
($\Longleftarrow$) 这个方向证明，我在怎么用dense这个性质的时候想了很久，最后突然发现一句“由选择公理”就完了，就完了，是的，你没有听错...

任取$d \in \cat{D}$，由dense性质和选择公理,是可以构造一个$\isom{\mu_d}{FG(d)}{d}$,在dense下选一个$c$,让$G(d)=c$.对象映射处理好了，就可以来构造一个交换图了
		
\begin{center}		
% https://tikzcd.yichuanshen.de/#N4Igdg9gJgpgziAXAbVABwnAlgFyxMJZABgBpiBdUkANwEMAbAVxiRADEBxACigEoQAX1LpMufIRQAmclVqMWbKEJEgM2PASJkpc+s1aIOPKAHIBw0RolEZu6vsVGzQuTCgBzeEVAAzAE4QALZIZCA4EEgy8gZsXL4g1Ax0AEYwDAAKYpqSIP5YHgAWOIkgDFhghiBQdHCF7ip+gSGIYRFIAIwOClUAOr1BTAD6ykmp6VnWWkYMML4lliABwZ3U7YgAzN2xRgljaZnZNjNzC6rLLdHrW2Xjh1O5+UUl204g-YNDwGaCroJAA
\begin{tikzcd}
FG(d) \arrow[dd, "FGg"', dashed] \arrow[rr, "\mu_d"] &  & d \arrow[dd, "g"] \\
                                                     &  &                   \\
FG(d') \arrow[rr, "\mu_{d'}"']                       &  & d'               
\end{tikzcd}
\end{center}

任取范畴$D$中一个态射$\func{g}{d}{d'}$,$\mu_d$和$\mu_d'$都是同构，所以可以上面的lemma可以唯一确定一个$FGg$。因为$F$是faithful，所以换个角度看$G(d) \rightarrow G(d')$也是唯一的，现在$\Func{\mu}{FG}{1_D}$里面所有的component都是可以确定一个交换图的，且都是同构的，但是这里有一个问题，我们用选择公理弄了上面这样一个$G$出来，我们并没有证明它确实是一个函子，还少一步验证它对态射作用，首先是单位态射，我们有下面这个交换图
\begin{center}
% https://tikzcd.yichuanshen.de/#N4Igdg9gJgpgziAXAbVABwnAlgFyxMJZABgBpiBdUkANwEMAbAVxiRADEBxACigEoQAX1LpMufIRQAmclVqMWbKEJEgM2PASJkpc+s1aIOPfitEaJRGbur7FR5YLkwoAc3hFQAMwBOEALZIZCA4EEgAjLYKhiAAOrH+TAD6ytQMdABGMAwACmKakiAMMF44ZiC+AUHUoUgy8gZsXNzhKXwABPE4MAAeOMDtED7tgu3srcAmfIIgaZnZeRZaRj5YrgAWZcLefoGIkSFhiADMUY1GralF87n5lkbFpeWVe-W1J2f2IMnAUADkMzmWVuS0Kqw2WwogiAA
\begin{tikzcd}
FG(d) \arrow[rr, "\mu_d"] \arrow[dd, "FG(1_d) \text{ or } F1_{G(d)}"'] &  & d \arrow[dd, "1_d"] \\
                                                                       &  &                     \\
FG(d) \arrow[rr, "u_{d'}"']                                            &  & d                  
\end{tikzcd}
\end{center}

还是由前面的lemma和$F$上对态射的单射性质，这里有$G(1_d) = 1_{G(d)}$,相似地，再给一个态射$\func{f'}{d'}{d''}$,我们有下面的交换图

\begin{center}
% https://tikzcd.yichuanshen.de/#N4Igdg9gJgpgziAXAbVABwnAlgFyxMJZABgBpiBdUkANwEMAbAVxiRADEBxACigHIAlCAC+pdJlz5CKAEzkqtRizZQRYkBmx4CRMjIX1mrRBx79Ba8VqlE5+6oeUnzIhTCgBzeEVAAzAE4QALZIZCA4EEgAjA5KxiAAOglBTAD6qtQMdABGMAwAChLa0iAMML44liABwaHUEUhyikZsXNy+fL4CAARJODAAHjjA3RD+3cLd7Nw8DIJJAMZQEDjdswJCmTl5hdY6Jv5YHgAWlaJ+gSGIMeGRiADMW7kFRTYmZRUgsS0mHb5VNSuTQaD2+ThAaWA5mEX1K2xeexKhxOZwowiAA
\begin{tikzcd}
FG(d') \arrow[rr, "\mu_d"] \arrow[dd, "FG(g'g) \text{ or } F(G(g')\cdot G(g)"'] &  & d \arrow[dd, "g'g"] \\
                                                                                 &  &                     \\
FG(d'') \arrow[rr, "u_{d''}"']                                                   &  & d''                
\end{tikzcd}
\end{center}

这里有$G(g'g)=G(g')\cdot G(g)$.

现在已经完成了前一半的证明，接下来想一下如何构造$\Func{\eta}{GF}{1_c}$.并不能直接来构造，尝试构造下面的交换图
\begin{center}
% https://tikzcd.yichuanshen.de/#N4Igdg9gJgpgziAXAbVABwnAlgFyxMJZABgBpiBdUkANwEMAbAVxiRADEAKAYwEoQAvqXSZc+QigBM5KrUYs27AOJc+g4SAzY8BIgBYZ1es1aIOPfkJHbxRMpNnGFZ1QHJLGrWN1TSDo-KmHCo87urW3hLIBv5yJoqhlrIwUADm8ESgAGYAThAAtkhkIDgQSACMAfEuADo1MDh0APrc4SC5BRXUpUjSIAx0AEYwDAAKojoS-TBZOCBVziB1+UxNwKq8Am0dhYjFPYgAzNQDw2MTtmY5WKkAFnMLQexZ23m7lSVliAb9QyPjNh8IGudwecUWymer06iD6BwArCc-udAVMGDMwU4ni8rO03kgfgikWcAZE2CD7vNwUFlqt1oktridkhjp8CcT-hcgRTMYFFHUGs1gNxXIyKAIgA
\begin{tikzcd}
F(c) \arrow[rr, "F\eta_c"] \arrow[dd, "Ff"'] &  & FGF(c) \arrow[rr, "\mu_{F(c)}"] \arrow[dd, "FGFf"'] &  & F(c) \arrow[dd, "Ff"] \\
                                             &  &                                                     &  &                       \\
F(c') \arrow[rr, "F\eta_{c'}"']              &  & FGF(c') \arrow[rr, "\mu_{F(c')}"']                  &  & F(c')                
\end{tikzcd}
\end{center}
声明一下其中的几个定义，态射$\func{f}{c}{c'}$,两个component $\func{\eta_c}{c}{GF(c)}$, $\func{\eta'_c}{GF(c)}{c}$,把$F\eta_c$定义为$\mu^{-1}_{F(c)}$,这样做的目的是使得$F\eta_c  \cdot F\eta'_c=F(\eta_c\eta'_c) =\mu_{F(c)}\mu^{-1}_{F(c)}=1_{F(c)}=F(1_c)$，再反过来做一次就得到了同构$u$.

再看这个大长方形和两个小正方形的交换性，大长方形由上述定义交换，右边这个小正方形因为$\mu$是个自然同构，所以也是交换的，言下之意左边这个小正方形也是交换的。这两个小正方形带来的作用是什么？左边这个交换可以得到\[FGFf \cdot F\eta_c = F(GFf \cdot \eta_c) = F(\eta_{c'} \cdot f) = F\eta_{c'} \cdot Ff\]再由$F$的faithful性质，即有$GFf \cdot \eta_C = \eta_{c'} \cdot f$,这个等式就表示下面的图交换

\begin{center}
% https://tikzcd.yichuanshen.de/#N4Igdg9gJgpgziAXAbVABwnAlgFyxMJZABgBpiBdUkANwEMAbAVxiRAGMQBfU9TXfIRRkATFVqMWbdgHJuvEBmx4CREeXH1mrRCADiAMQAU7AJTy+ywWtJjqWqbsMmZ5ruJhQA5vCKgAZgBOEAC2SGQgOBBI6hLabAA6CTA4dAD6nDwBwWGIsVFIAMz2kjr6Bv4WIEGhSACM1AWIxSAMdABGMAwACvwqQiCBWF4AFjggJfG6SSnpslU1uRFNDa0dXb1WqrpDo+OTjtXcFFxAA
\begin{tikzcd}
c \arrow[rr, "\eta_c"] \arrow[dd, "f"'] &  & GF(c) \arrow[dd, "GFf"] \\
                                        &  &                         \\
c' \arrow[rr, "\eta_c'"']               &  & GF(c')                 
\end{tikzcd}	
\end{center}

将近拖了半个月的证明，终于证完了，选择公理的应用和间接构造自然同构，还是得在细细想想...

\newpage
\subsection{The art of the diagram chase}

\begin{definition}
\rm \redt{(一个不那么offical的定义)} A \redt{diagram} is typically presented informally as a directed graph of morphism in a category. In this informal presentation, the diagram commutes if any two paths of \redt{composable} arrows in the directed  graph with common source and target  have the same composite.
\end{definition}

\begin{definition}
\rm A diagram in a category $\cat{C}$ is a functor $F:\cat{J} \to \cat{C}$ whose domain, the \redt{indexing category}, is a small category.
\end{definition}

\begin{annotation}
\rm 为什么diagram是一个functor呢？ 如果我们抹去一个常见diagram上面的关于objects和morphism注解它会变成这样
$$
% https://tikzcd.yichuanshen.de/#N4Igdg9gJgpgziAXAbVABwnAlgFyxMJZABgBpiBdUkANwEMAbAVxiRAB12AjJhhmHCAC+pdJlz5CKAEzkqtRizacefAcNEgM2PASIBGUvvn1mrRB269+gofJhQA5vCKgAZgCcIAWyRkQOBBI+iLuXr6I-oFI0qEgnj4x1NGIIRRCQA
\begin{tikzcd}
\bullet \arrow[rr] \arrow[rd] &                    & \bullet \\
                              & \bullet \arrow[ru] &        
\end{tikzcd}
$$
然后我们把它和正常的diagram放在一起
$$
% https://tikzcd.yichuanshen.de/#N4Igdg9gJgpgziAXAbVABwnAlgFyxMJZABgBpiBdUkANwEMAbAVxiRAB12AjJhhmHCAC+pdJlz5CKAEzkqtRizacefAcNEgM2PASIBGUvvn1mrRB269+gkWJ2SiAFjnVTSiwA0N9iXpQAbK4KZmwAmj5a4rpSyACsRiaK5iAAWsLyMFAA5vBEoABmAE4QALZIZCA4EEiGIR5g1tQMdFwwDAAK0Y4W-AW2msVlFdTVSLL15o18za3tXQ7+IH0DhSXliBNjiHXuU03Lc53dSyuRQxsAzKM1iAmHbceLUiBFWNkAFoJuyWzZ5+skPdti4HvMTi83p9vpM2B8AcNENcqrdQXs2AUMkIgA
\begin{tikzcd}
\bullet \arrow[rr] \arrow[rd] &                    & \bullet &  & X \arrow[rd, "g"'] \arrow[rr, "f"] &                    & Y \\
                              & \bullet \arrow[ru] &         &  &                                    & Z \arrow[ru, "h"'] &  
\end{tikzcd}
$$
然后我们将第一个就可以视为diagram of indexing category，实际上这个diagram可能是invisible. 特别地如果将$J$看做一个finite preoder，我们给其中三个点加上表示一个preorder必要的信息
$$
% https://tikzcd.yichuanshen.de/#N4Igdg9gJgpgziAXAbVABwnAlgFyxMJZABgBpiBdUkANwEMAbAVxiRAEYQBfU9TXfIRQAmclVqMWbAMzdeIDNjwEi7Uu3H1mrRCGFy+SwUQAsY6lqm6AGgYX9lQ5ADZzE7WwCadxQJUoAVnVNSR0QAC1ucRgoAHN4IlAAMwAnCABbJDIQHAgkNRAGOgAjGAYABQdjXQYYJJwQC1C2AB0W2oBHO1SMrOpcpFF3KxA2zsbCkrLKo38QFKxYgAsGnmS0zMQhgcQCyzCxmC7qItKKqrmF5dX5Hs3pfrzEIMmzmb8hecWVif22WO6GyQLx2Zle0wunyuPyaHl0S0BvUQDxyTzBf10SURm2yO2yDAgEDQRDISUYcBg4lOENmUO+qwoXCAA
\begin{tikzcd}
1 \arrow[rr, "\leq"] \arrow[rd, "\leq"'] \arrow[loop, distance=2em, in=305, out=235] &                       & 3 &  & X \arrow[rd, "g"'] \arrow[rr, "f"] &                    & Y \\
                                                                                     & 2 \arrow[ru, "\leq"'] &   &  &                                    & Z \arrow[ru, "h"'] &  
\end{tikzcd}
$$
注意里面$1$这里有一个环表示$1 \leq 1$，其它两个点也有，只是省略了. 这里的关系就很天然了，其中$1 \leq 1$可以对应上identity $1_X: X \to X$, 而$1 \leq 2 , 2 \leq 3 \Rightarrow 1 \leq 3$ 对应上$g: X\to Z, h: Z \to Y \Rightarrow f: X \to Y$，完全可以让我们建立起一个functor，左图关于functor的image不多不少就是diagram，同时还是commutative的.  
\end{annotation}

\newpage
\section{Univeral Properties, Respresentability, and the Yoneda Lemma}


\end{document}
