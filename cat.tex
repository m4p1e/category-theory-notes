\documentclass{article}
\usepackage{ctex}
%\usepackage{math490}
\usepackage{tikz}
\usetikzlibrary{cd}
\usepackage{amsthm}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{unicode-math} %为了花体数字
%\usepackage[bbgreekl]{mathbbol}
\usepackage[all,cmtip]{xy} %画交换图的package
\usepackage{xspace}

\usepackage{hyperref} %url
\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    filecolor=magenta,      
    urlcolor=cyan,
    pdftitle={Overleaf Example},
    pdfpagemode=FullScreen,
    }

\usepackage{titlesec}
\titleformat{\section}[block]{\color{blue}\Large\bfseries\filcenter}{}{1em}{}
\titleformat{\subsection}[hang]{\color{red}\Large\bfseries}{}{0em}{}
\usepackage[textwidth=18cm]{geometry} %页宽

%theorem,corollary,lemma
%\newtheorem{theorem}{Theorem}[section]
%\newtheorem{corollary}{Corollary}[theorem]
%\newtheorem{lemma}[theorem]{Lemma}
%\newtheorem{definition}[theorem]{Definition}
%\newtheorem{example}[theorem]{Example}

\newtheorem{theorem}{Theorem}[section]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{example}[theorem]{Example}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{remark}[theorem]{Remark}
\newtheorem{exercise}{Exercise}[section]


\newcommand{\defeq}{\coloneqq}
\newcommand{\eqdef}{\eqqcolon}

% shortcuts for various fonts
\newcommand{\tbf}{\textbf}
\newcommand{\mcl}{\mathcal}
\newcommand{\mbf}{\mathbf}
\newcommand{\mbb}{\mathbb}
\newcommand{\msr}{\mathscr}
\newcommand{\mfr}{\mathfrak}
\newcommand{\msf}{\mathsf}
\newcommand{\mrm}{\mathrm}

% shortcuts for common categories
\newcommand*{\cat}[1]{\textsf{#1}\xspace}
\newcommand{\Cat}{\textsf{Cat}\xspace}
\newcommand{\CAT}{\textsf{CAT}\xspace}
\newcommand{\Set}{\textsf{Set}\xspace}
\newcommand{\Fin}{\textsf{Fin}\xspace}
\newcommand{\Top}{\textsf{Top}\xspace} % replaced logical Top ⫪
\newcommand{\Ring}{\textsf{Ring}\xspace}
\newcommand{\Field}{\textsf{Field}\xspace}
\newcommand{\Group}{\textsf{Group}\xspace}
\newcommand{\Monoid}{\textsf{Monoid}\xspace}
\newcommand{\Ab}{\textsf{Ab}\xspace}
\newcommand{\Rng}{\textsf{Rng}\xspace}
% these can only be used in math mode
% if you can come up with a macro that works in both tell me
\newcommand{\Setp}{\textsf{Set}_*}
\newcommand{\Finp}{\textsf{Fin}_*}
\newcommand{\Topp}{\textsf{Top}_*}
\newcommand*{\Mod}[1]{\textsf{Mod}_{#1}}
\newcommand*{\Mat}[1]{\textsf{Mat}_{#1}}
\newcommand*{\Vect}[1]{\textsf{Vect}_{#1}}

\newcommand{\zero}{\mbb{0}}
\newcommand{\one}{\mbb{1}}
\newcommand{\two}{\mbb{2}}
\newcommand{\three}{\mbb{3}}
\newcommand{\four}{\mbb{4}}
\newcommand{\five}{\mbb{5}}
\newcommand{\six}{\mbb{6}}
\newcommand{\seven}{\mbb{7}}
\newcommand{\eight}{\mbb{8}}
\newcommand{\nine}{\mbb{9}}

\newcommand{\Proj}{\text{\bf Proj}}
\newcommand{\Affine}{\text{\bf Affine}}

% blackboard bold shortcuts
\renewcommand{\AA}{\mathbb{A}} % replaced Angstrom symbol Å
\newcommand{\BB}{\mathbb{B}}
\newcommand{\CC}{\mathbb{C}}
\newcommand{\DD}{\mathbb{D}}
\newcommand{\FF}{\mathbb{F}}
\newcommand{\KK}{\mathbb{K}}
\newcommand{\NN}{\mathbb{N}}
\newcommand{\PP}{\mathbb{P}}
\newcommand{\QQ}{\mathbb{Q}}
\newcommand{\RR}{\mathbb{R}}
\renewcommand{\SS}{\mathbb{S}}
\newcommand{\ZZ}{\mathbb{Z}}

% sans serif shortcuts
\newcommand{\sA}{\mathsf{A}}
\newcommand{\sB}{\mathsf{B}}
\newcommand{\sC}{\mathsf{C}}
\newcommand{\sD}{\mathsf{D}}
\newcommand{\sE}{\mathsf{E}}
\newcommand{\sF}{\mathsf{F}}
\newcommand{\sG}{\mathsf{G}}
\newcommand{\sH}{\mathsf{H}}
\newcommand{\sJ}{\mathsf{J}}
\newcommand{\sP}{\mathsf{P}}

% script shortcuts -- NOT USED FOR CATEGORIES, USE mathsf
% note: cD, cH, cL, and cR were commands in an earlier version of xypic now
% considered obsolete, the file xyv2.tex still defines them, hence the
% renewcommand
\newcommand{\cA}{\mathcal{A}}
\newcommand{\cB}{\mathcal{B}}
\newcommand{\cC}{\mathcal{C}}
\newcommand{\cD}{\mathcal{D}} % see note
\newcommand{\cF}{\mathcal{F}}
\newcommand{\cG}{\mathcal{G}}
\newcommand{\cH}{\mathcal{H}} % see note
\newcommand{\cI}{\mathcal{I}}
\newcommand{\cJ}{\mathcal{J}}
\newcommand{\cP}{\mathcal{P}}
\newcommand{\cL}{\mathcal{L}} % see note
\newcommand{\cM}{\mathcal{M}}
\newcommand{\cN}{\mathcal{N}}
\newcommand{\cO}{\mathcal{O}}
\newcommand{\cS}{\mathcal{S}}
\newcommand{\cT}{\mathcal{T}}
\newcommand{\cV}{\mathcal{V}}
\newcommand{\cX}{\mathcal{X}}
\newcommand{\cY}{\mathcal{Y}}
\newcommand{\cZ}{\mathcal{Z}}

\newcommand{\mm}{\mathfrak{m}}
\newcommand{\pp}{\mathfrak{p}}
\newcommand{\qq}{\mathfrak{q}}
\newcommand{\ee}{\mathfrak{e}}

\newcommand{\bC}{{\bf C}}
\newcommand{\bD}{{\bf D}}

% shortcuts for various greek letters
\newcommand{\al}{\alpha}
\newcommand{\be}{\beta}
\newcommand{\gm}{\gamma}
\newcommand{\Gm}{\Gamma}
\newcommand{\de}{\delta}
\newcommand{\De}{\Delta}
\newcommand{\ep}{\epsilon}
\newcommand{\ze}{\zeta}
\renewcommand{\th}{\theta} % replaced thorn þ
\newcommand{\Th}{\Theta}
\newcommand{\io}{\iota}
\newcommand{\ka}{\kappa}
\newcommand{\lm}{\lambda}
\newcommand{\Lm}{\Lambda}
\newcommand{\sm}{\sigma}
\newcommand{\Sm}{\Sigma}
\newcommand{\om}{\omega}
\newcommand{\Om}{\Omega}

% for embedding text in display style math
\newcommand*{\qtextq}[1]{\quad\text{#1}\quad}
\newcommand*{\qtext}[1]{\quad\text{#1}}
\newcommand*{\textq}[1]{\text{#1}\quad}
\newcommand{\IN}{\text{ in }}
\newcommand{\AND}{\text{ and }}
\newcommand{\OR}{\text{ or }}
\newcommand{\ST}{\text{ such that }}
\newcommand{\IF}{\text{ if }}

% 1/<stuff> seems to be the most common fraction
\newcommand*{\recip}[1]{\frac{1}{#1}}
\newcommand*{\trecip}[1]{\tfrac{1}{#1}}
\newcommand*{\ipr}[2]{\left\langle{#1},{#2}\right\rangle}

\newcommand{\id}{1}
\newcommand{\op}{\textrm{op}}
\newcommand{\iso}{\textrm{iso}}
\newcommand{\nil}{\emptyset}
\newcommand{\by}{\times}
\newcommand{\emb}{\hookrightarrow}
\newcommand{\wto}{\rightharpoonup}
\newcommand{\bic}{\leftrightarrow}
\newcommand{\To}{\Rightarrow}
\newcommand*{\inv}[1]{{#1}^{-1}}

\newcommand{\Ztwo}{\ZZ\sqbraq{\sqrt{2}}}
\newcommand{\rtwo}{\sqrt{2}}
\newcommand*{\lst}[3][1]{{#2}_{#1},\dots,{#2}_{#3}}
\newcommand*{\fm}[3][i]{\{{#2}_{#1}\}_{{#1}\in{#3}}}

% function defintions
\newcommand*{\xfunc}[4]{{#2}\colon{#3}{#1}{#4}}
\newcommand*{\func}[3]{\xfunc{\to}{#1}{#2}{#3}}
\newcommand*{\Func}[3]{\xfunc{\To}{#1}{#2}{#3}}
\newcommand*{\mono}[3]{\xfunc{\rightarrowtail}{#1}{#2}{#3}}
\newcommand*{\afunc}[4]{\xfunc{\leftrightarrows}{#1}{#3}{#4}\noloc{#2}}
\newcommand*{\epic}[3]{\xfunc{\twoheadrightarrow}{#1}{#2}{#3}}
\newcommand*{\incl}[3]{\xfunc{\hookrightarrow}{#1}{#2}{#3}}
\newcommand*{\pfunc}[3]{\xfunc{\rightrightarrows}{#1}{#2}{#3}}
\newcommand*{\idfunc}[1]{\func{\id_{#1}}{#1}{#1}}
\newcommand*{\oper}[2]{\func{#1}{{#2}\by{#2}}{#2}}
\newcommand*{\nper}[3]{\func{#1}{{#2}^{#3}}{#2}}
\newcommand*{\maps}[3]{\xfunc{\mapsto}{#1}{#2}{#3}}
\newcommand*{\isom}[3]{\xfunc{\cong}{#1}{#2}{#3}}

\newcommand*{\con}[3]{{#1}\equiv{#2}\mod{#3}}
\newcommand*{\pcon}[3]{{#1}\equiv{#2}\pmod{#3}}

% auto resize delimiters
\newcommand*{\norm}[1]{\left\|{#1}\right\|}
\newcommand*{\abs}[1]{\left\lvert{#1}\right\rvert}
\newcommand*{\qty}[1]{\left({#1}\right)}
\newcommand*{\sqr}[1]{\left[{#1}\right]}
\newcommand*{\floor}[1]{\left\lfloor{#1}\right\rfloor}
\newcommand*{\ceil}[1]{\left\lceil{#1}\right\rceil}
\newcommand*{\angl}[1]{\left\langle{#1}\right\rangle}

\newcommand*{\basis}[2]{\left\{{#1}_1,\dots,{#1}_{#2}\right\}}
\newcommand*{\inlnmat}[1]{\left(\begin{smallmatrix}#1\end{smallmatrix}\right)}
\newcommand*{\dispmat}[1]{\begin{pmatrix}#1\end{pmatrix}}
\newcommand*{\adj}[1]{\!\sqr{#1}}
\newcommand*{\fld}[1]{\!\qty{#1}}
\newcommand*{\fps}[1]{\!\sqr{\!\sqr{#1}\!}}
\newcommand*{\lps}[1]{\!\qty{\!\qty{#1}\!}}

% this is the preferred way to make non-italic text for function and operator
% names; it automatically handles spacing
\DeclareMathOperator{\ob}{ob}
\DeclareMathOperator{\fin}{fin}
\DeclareMathOperator{\mor}{mor}
\DeclareMathOperator{\dom}{dom}
\DeclareMathOperator{\len}{len}
\DeclareMathOperator{\cod}{cod}
\DeclareMathOperator{\colim}{colim}
\DeclareMathOperator{\range}{range}
\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\End}{End}
\DeclareMathOperator{\Sym}{Sym}
\DeclareMathOperator{\Aut}{Aut}
\DeclareMathOperator{\Spec}{Spec}
\DeclareMathOperator{\Gal}{Gal}
\DeclareMathOperator{\ID}{id}
\DeclareMathOperator{\sgn}{sgn}
\DeclareMathOperator{\Conj}{Conj}
\DeclareMathOperator{\Sect}{Sect}

\newcommand{\redt}[1]{\textcolor{red}{#1}}
\newcommand{\bluet}[1]{\textcolor{blue}{#1}}

\title{Category Theory}
\author{maple,菜鸡}
\date{\today}

\begin{document}
\maketitle
\tableofcontents


\newpage
\section{Categories, Functors, Natural Transformations}

\subsection{Categories}

%https://math.stackexchange.com/questions/172966/what-are-the-differences-between-class-set-family-and-collection
\begin{definition}
\rm 一个范畴(category)由
\begin{itemize}
	\item a collection of objects (\bluet{如果把collection翻译成集族，我觉得在这里不对，感觉collection就是表示一堆元素，为了避免可能出现paradox of "the set that includes all set"，因此在这里淡化用集合表示的概念})
	\item a collection of morphisms
\end{itemize}
组成. 它们满足一些基本公理
\begin{itemize}
	\item 每一个morphism都有一个domain object和codomain object, 一般表示为$\func{f}{X}{Y}$
	\item 每个object有一个identity morphism $\idfunc{X}$. 
	\item 给定两个morphism $\func{f}{X}{Y}, \func{g}{Y}{Z}$，那么morphism $\func{g \circ f }{X}{Z}$也是存在的，这个特殊的morphism $g \circ f $我们称之为composite morphism. \bluet{也就是说morphism在复合作用下也是存在的，因此可以推广至任意可复合的morphism上}.
	\item 任意的morphism $\func{f}{X}{Y}$，满足
	$$
		f\circ\id_X = f, \id_Y \circ f = f. 
	$$
	\item morphism之间的复合满足结合律，给定morphism $\func{f}{X}{Y}, \func{g}{Y}{Z}, \func{h}{Z}{W}$，那么
	$$
		h \circ (g \circ f) = (h \circ g) \circ f,
	$$
\end{itemize}
\end{definition}


\begin{definition}
\rm \redt{一个不太准确但是形象的concrete category的定义} 如果一个范畴的object都有一个underlying set(去瞅瞅universal algebra)，每一个morphism都是两个underlying set之间映射定义的function，特别地这些function都有structure-preserving的性质，那么我们则称这个范畴是一个concrete category. 
\end{definition}





\subsection{Duality}

\subsection{Functoriality}

\begin{flushleft}
\textbf{函子}(functor)\\
\begin{definition}
\rm 一个函子$F \colon \mathcal{C} \rightarrow \mathcal{D}$由两个映射组成
\begin{itemize}
 \item 每一个对象$c \in \mathcal{C}$,对应一个对象$F_c \in \mathcal{D}$。
 \item 每一个态射$f \colon c \rightarrow	c' \in \mathcal{C}$,对应一个态射$Ff \colon Fc \rightarrow Fc' \in \mathcal{D}$，所有$Ff$的domain和codomian分别对应$f$的domain和codomain。 
\end{itemize}
\end{definition}
同时还满足两个公理（functoriality aximos）
\begin{itemize}
 	\item 对任意的可复合态射$f$,$g \in \mathcal{C}$,$Fg \cdot Ff = F(g \cdot f)$
 	\item 对任意的对象$c \in \mathcal{C}$,$F(1_c)=1_{F_c}$
\end{itemize}
通俗一点来说，函子由两个范畴之间对象的映射和态射的映射组成，同时保留了范畴所有的结构，包括domains，codomain，复合律，identity。
\end{flushleft}

\begin{lemma}
函子保留同构
\end{lemma}

定义态射$\func{f}{x}{y}$和$\func{g}{y}{x}$,$fg = 1_x$,$gf=1_y$ \[F(fg)=F(f)F(g)=1_{F(x)} , F(gf)=F(g)F(f)=1_{F(y)}\]

但是反过来并不一定成立，即如果$F(f)$是一个同构，但是$f$不一定是一个同构，举个很简单的例子$\func{F}{\mathbb{2}}{\mathbb{1}}$,$\mathbb{1}$里面所有态射都是同构的，但是$\mathbb{2}$并不是一个群胚(groupoid)。
\pagebreak

\begin{example}
\rm 几种特殊的函子
	\begin{itemize}
		\item 对任意范畴$\cat{C}$,存在一个\tbf{单位函子}（identity functor）$\func{id_{\cat{C}}}{\cat{C}}{\cat{C}}$定义为\[id_{\cat{C}}(\xymatrix{c\ar[r]^f&c'})=\xymatrix{c\ar[r]^f&c'}\]
		\item 对于任意的范畴$\cat{C}$和$\cat{D}$,和$\cat{D}$中某个固定的对象$d$，存在一个\tbf{常量函子}（constant functor）$\func{C_{d}}{\cat{C}}{\cat{D}}$定义为\[C_{d}(\xymatrix{c\ar[r]^f&c'})=\xymatrix{d\ar[r]^{id_d}&d}\]
		\item \tbf{遗忘函子}（forgetful functor）$\func{U}{\cat{C}}{Set}$，$U(c)$指$c$的根本集合（underlying set），以代数为例，一个代数结构是在某个集合上定义的运算才新建的，这个集合就是根本集合。
		\item \tbf{同变hom-functor} 和 \tbf{逆变hom-functor} 后面有完整的介绍和证明。
	\end{itemize}
	
\end{example}


\begin{example}
\rm 如果把群（Group）看做一个对象的范畴，那么群范畴和群范畴的函子是什么？
\end{example}
首先回忆一下，群范畴只有单个对象$x$,群里面的元素对应群范畴里面的态射，其domain和codomain都是对象$x$，群里面的单位元对应群范畴里面的$1_x$单位态射，群元素之间的乘法运算对应态射之前的映射。

定义两个群范畴$C$和$D$,他们的对象分别是$x_1$和$x_2$,他们之前存在的函子定义为$F$,很自然地$F$对对象的作用只能是$F(x_1) = x_2$，所以我们主要关注问题是$F$对态射的作用，首先对$1_x$,我们有$F(1_x)=1_{F(x)}$,即$1_{x_1}$对应$1_{x_2}$。另外还必须要求对任意态射$f \in F$有$F(dom(f))=dom(F(f))$和$F(cod(f))=cod(F(f))$，根据前面的群范畴的定义，我们知道态射$f$的domain和codomain是相等的，所以我们有$F(dom(f))=dom(F(f))=cod(F(f))=F(cod(f))=x_2$，这个要求是比较trivial的,最后我们要求如果态射$f$和$g$在$C$里面如果可以复合，则$F(fg)=F(f)F(g)$,在群范畴里面所有态射都是可复合的，所以对任意的$f$和$g$,我们都有上面的结论，所有性质都结合起来看，函子$F$保留了单位元和运算结构，还有一个trivial的封闭性，所以其实这个$F$就是一个群同态（homomorphism）


\begin{example}
函子$F: \mathcal{C} \rightarrow \mathcal{D}$并不一定定义了一个$\mathcal{D}$的子范畴
\end{example}

定义一个顺序范畴$\mathcal{C}  = \mathbb{2}$，即：
\[\xymatrix{0\ar[r]^f&1.}\]

所以范畴$\mathcal{C}$里面有三个态射$1_0,1_1,f$，然后我们再构造一个范畴$\mathbb{D}$,里面存在一个满态射(endomorphism)$g$:
\[\xymatrix{x\ar[r]^g&x.}\]
但是$gg$不等于$1_x$和$g$,这很容易办到，例如$x={1,2,3}$在$Set$中，$g$表示函数$1 \rightarrow 2, 2\rightarrow 3 ,3 \rightarrow 1$,那么$gg$表示$1 \rightarrow 3, 2 \rightarrow 1 , 3 \rightarrow 2$, 很显然$gg$不等于$1_x$和$g$,但是还是一个endomorphism，这也说明endomorphism的复合还是endomorphism。

接着我们来开始构造一个$F$, $F(0)=F(1)=x$,且$F(0_1)=1_x,F(1_1)=1_x,F(f)=g$,$mathcal{C}$中三个态射有四种复合方式，为了说明$F$是一个函子，还需要证明$F$保留了这四个复合结构，$F(1_11_1)=F(1_0)F(1_0)=1_x,F(0_10_1)=F(0_1)F(0_1)=1_x,F(f0_1)=F(f)F(0_1)=g1_x,F(1_1f)=1_xg$,很显然这是$F$的确保持了复合结构，$F$的像里面只有$1_x,g$,根据范畴复合公理$gg$是可以复合的，但是$gg \notin img_F$，所以函子$F$并没有定义一个子范畴。


\begin{flushleft}
\textbf{同变函子和逆变函子}（covariant and contravariant)
\end{flushleft}

\begin{definition}
前面定义的函子也叫同变函子，那么一个逆变函子从$C$到$D$为$F: \mathcal{C}^{op} \rightarrow \mathcal{D} $,也是由两个映射组成
\begin{itemize}
	\item 每一个对象$c \in \mathcal{C}$,对应一个对象$F_c \in \mathcal{D}$。
	\item 每一个态射$f \colon c \rightarrow	c' \in \mathcal{C}$，对应一个态射$Ff \colon Fc' \rightarrow Fc \in \mathcal{D}$,所有$Ff$的domain和codomian分别对应$f$的codomain和domain
\end{itemize}
\end{definition}
同时也满足两个公理（functoriality aximos）\\
\begin{itemize}
	\item 对任意的可复合的$f$,$g \in \mathcal{C}$,$Ff \cdot Fg = F(g \cdot f)$
	\item 对任意的对象$c \in \mathcal{C}$,$F(1_c)=1_{F_c}$
\end{itemize}
相对于同变函子来说，$f$对应的像$Ff$的箭头反过来了，下面这个图可以很形象的描述

\begin{center}
$C^{op} \xrightarrow{F} \mathcal{D}$ \\
% https://tikzcd.yichuanshen.de/#N4Igdg9gJgpgziAXAbVABwnAlgFyxMJZABgBpiBdUkANwEMAbAVxiRAGMQBfU9TXfIRRkAjFVqMWbdgHJuvEBmx4CREeXH1mrRCABiAfU48+ywWtJjqWqbsPBZXbuJhQA5vCKgAZgCcIALZIZCA4EEgATNQ4dFgMbAF0aHBh8j7+QYjqoeGIAMzRsfG6icmpJiB+gcHRudk2OpVplRlIBTmR1pKNet7OXEA
\begin{tikzcd}
c \arrow[r, maps to] \arrow[d, "f"] & F_c                    \\
c' \arrow[r, maps to]               & F_{c'} \arrow[u, "Ff"]
\end{tikzcd}
\end{center}	

\begin{definition}
如果范畴$\mathcal{C}$是局部小的，可以用任意一个对象$c \in \mathcal{C}$来表示一对同变函子和逆变函子：
\[
	\xymatrix@-1pc{
	\cat{C}\ar[rr]^{\cat{C}(c,-)} & & \Set & \cat{C}^\op \ar^{\cat{C}(-,c)}[rr] & & Set \\
	x\ar[dd]_{f} & \mapsto & \cat{C}(c,x)\ar[dd]^{f_*} & x\ar[dd]_{f} & \mapsto & \cat{C}(x,c) \\
	  &\mapsto & & & \mapsto & &\\
	y & \mapsto & \cat{C}(c,y) & y & \mapsto & \cat{C}(y,c)\ar[uu]_{f^*} \\
	}
	\]
\end{definition}

首先需要给函子$\cat{C}(c,-)$和$\cat{C}(-,c)$的定义，函子$\cat{C}(c,-)$表示把
$x \in \cat{C}$映射到包含$c$到$x$箭头集合$\cat{C}(c,x)$，对偶地，函子$\cat{-,c}$表示把$x \in \cat{C}$映射到包含到$x$到$c$箭头集合$\cat{C}(x,c)$. 对于态射而言，$\cat{C}(c,-)$把态射$\func{f}{x}{y}$映射到$\func{f_*}{\cat{C}(c,x)}{\cat{C}(c,y)}$,对偶形式这里就不累述了，现在要证明他们确实是一个函子

我们来检验他们是否满足函子的公理，从两个方面出发是否保留了复合结构和单位态射:

定义$\cat{C}$中两个可复合的态射$\func{f}{x}{y},\func{g}{w}{x}$,我们需要证明$\cat{C}(c,-)(fg)=\cat{C}(c,-)(f)\cat{C}(c,-)(g)$. 因为$\func{fg}{w}{y}$,所以\[\func{\cat{C}(c,-)(fg)}{\cat{C}(c,-)(w)}{\cat{C}(c,-)(y)}\],而$\dom\cat{C}(c,-)(f)=\cod\cat{C}(c,-)(g)=\cat{C}(c,x)$,所以\[\func{\cat{C}(c,-)(f)\cat{C}(c,-)(g)}{\cat{C}(c,-)(w)}{\cat{C}(c,-)(y)}\],完成我们的证明目标。

对于单位态射而言，我们证明目标是$\cat{C}(c,-)(1_x)=1_{\cat{C}(c,-)(x)}$, 首先对任意的对象$x\in\cat{C}$,$\func{1_x}{x}{x}$,有\[\func{\cat{C}(c,-)(1_x)}{\cat{C}(c,-)(x)}{\cat{C}(c,-)(x)}\],对应的\emph{post composition with $1_x$} $\func{1^{*}_{x}}{\cat{C}(c,x)}{\cat{C}(c,x)}$，对任意$a\in\cat(c,x)$,$1^{*}_{x}$把$a\mapsto 1_xa$,即$a \mapsto a$,所以$1_{\cat{C}(c,-)(x)} = 1_{\cat{C}(c,x)}$，因为$1_{\cat{C}(c,x)}$就是把$a \mapsto a$,证明目标完成，

最后还需要证明$\cat{C}(-,c)$是一个逆变函子，利用对偶性质，$\func{\cat{C}^\op(c,-)}{\cat{C}^\op}{\Set}$也是一个函子，同时它也是一个逆变函子，自然地$\cat{C}^\op(c,-) = \cat{C}(-,c)$，证闭。

\begin{example}
函子$\sC^{\op}\to \sD$和函子$\sC\to \sD^{\op}$有什么区别？函子$\sC\to\sD$和函子$\sC^{\op}\to \sD^{\op}$又有什么区别？
\end{example}

先给结论都是没有区别的，现证函子$\sC\to\sD$和函子$\sC^{\op}\to \sD^{\op}$没有区别，定义$F$为$\sC\to\sD$的函子，即$F$满足对$\func{f}{x}{y}$和$\func{g}{w}{x}$有$F(fg)=F(f)F(g)$,$\sC^{op}$和$\sC$里面的对象是相同的，态射的箭头转向，即$\func{f}{y}{x}$和$\func{g}{x}{w}$,把$F$作用在它们上$F(gf)=F(g)F(f)$也是成立的，其中$F(g) \in \sD^{op}$,所以两个函子没有区别。

下面再用一个小trick $({\sC^{op}})^{op}=\sC$, 再用一下上面已经证明的结论$\sC^{op}\to\sD$等价为$({\sC^{op}})^{op}\to\sD^{op}$, 即$\sC\to\sD^{op}$。

\begin{flushleft}
\textbf{函子的复合}
\end{flushleft}
设$F \colon \mathcal{A} \rightarrow \mathcal{B},G \colon \mathcal{B} \rightarrow \mathcal{C}$是函子，定义$GF \colon \mathcal{A} \rightarrow \mathcal{C}$使得对$\mathcal{A}$中的任意一个对象$A$,\[A \mapsto G(F(A))\]
对$\mathcal{A}$中的任意一个态射$f \colon A \rightarrow B$, \[(f \colon A \rightarrow B) \mapsto (G(F(f)) \colon G(F(A)) \rightarrow G(F(b))) \]则GF是一个函子。

很自然地，因为函子可以进行复合运算，那么是否存在一个以所有范畴为对象，函子为态射的范畴? 但是遗憾的是两个范畴之间的函子的全体未必是一个集合。但是我们把目光限制在所有小范畴上时，我们的确可以得到一个以所有小范畴为对象，以小范畴之间函子为态射的范畴$\bf(Cat)$

\begin{definition}
设$F \colon \mathcal{C} \rightarrow \mathcal{D}$是一个函子。如果存在函子$G \colon \mathcal{D} \rightarrow \mathcal{C}$使得$GF=1_{\mathcal{C}},FG = 1_{\mathcal{D}}$,则称$F$是范畴$\mathcal{C}$到范畴$\mathcal{D}$的一个$\textbf{同构}$（isomorphism）。换一句话来说如果存在范畴$\mathcal{C}$到$\mathcal{D}$的同构$F \colon \mathcal{C} \rightarrow \mathcal{D}$,则称范畴$\mathcal{C}$与$\mathcal{D}$是同构的。
\end{definition}
这说明$F$是一个满射
两个范畴对象和态射是一个双射。


\begin{flushleft}
\textbf{c-Functor} \\
%待补充
\begin{center}
$\mathcal{C} \xrightarrow{C(c,-)} \mathcal{S}et$ \\
$\mathcal{C}^{op} \xrightarrow{C(-,c)} \mathcal{S}et$ \\
\end{center}
\end{flushleft}


\begin{flushleft}
$\textbf{Product}$ \\
\begin{definition}
对任意的两个范畴 $\mathcal{C}$ 和 $\mathcal{D}$,他们的积是一个新范畴 $\mathcal{C} \times \mathcal{D}$\\
\begin{itemize}
	\item 对象是有序对 $\left( c,d \right)$,其中$c$是$\mathcal{C}$中的一个对象，$d$是是$\mathcal{D}$的一个对象 
	\item 态射也是有序对 $\left(f,g \right) \colon \left(c,d\right) \rightarrow \left(c',d'\right)$,$f\colon c \rightarrow c' \in \mathcal{C}$,$g \colon d \rightarrow d' \in \mathcal{D}$
\end{itemize}
\end{definition}
\end{flushleft}


\begin{flushleft}
\textbf{双函子的形式化定义}(bifunctor) \\ 
\begin{definition}
%https://encyclopediaofmath.org/wiki/Bifunctor
它叫双函子，不如叫二元函子，因为bifunctor是binary functor的缩写，对范畴$\mathcal{C}_1,\mathcal{C}_2,\mathcal{D}$,二元函子表示为:\\

\begin{center}
$F \colon \mathcal{C}_1 \times \mathcal{C}_2 \rightarrow \mathcal{D}$
\end{center}
\end{definition}

这个函子的domain是两个范畴的积，例如Abel群看做一个范畴$\mathbf{G}$，其中加法运算 $+ \colon \mathbf{G} \times \mathbf{G} \rightarrow \mathbf{G}$是一个双函子(证明过程证明functor满足的两个公理即可，保持identity和复合律)。 

\end{flushleft}


\begin{flushleft}
$\textbf{自然双函子}$,好吧它的真正名字叫$\textbf{射影函子}$ \\
\begin{center}
$P_{\mathcal{C}} \colon \mathcal{C} \times \mathcal{D} \rightarrow \mathcal{C},\left( A,B \right)\mapsto A,\left( f,g \right)\mapsto f$ \\ \vbox{}
$P_{\mathcal{D}} \colon \mathcal{C} \times \mathcal{D} \rightarrow \mathcal{D},\left( A,B \right)\mapsto B,\left( f,g \right)\mapsto g$ \\
\end{center} 
\end{flushleft}



\begin{flushleft}
\textbf{射影函子的万有性质} \\
对任意的范畴 $\varepsilon$ 及函子 $R\colon \varepsilon \rightarrow \mathcal{C}$    和 $T\colon \varepsilon \rightarrow \mathcal{D}$ ,存在唯一的函子 $F\colon \varepsilon \rightarrow \mathcal{C}\times\mathcal{D}$ 使得 $P_{\mathcal{C}}F=R,P_{\mathcal{D}}F=T$, 即下面交换图表示
\end{flushleft}

% https://tikzcd.yichuanshen.de/#N4Igdg9gJgpgziAXAbVABwnAlgFyxMJZABgBpiBdUkANwEMAbAVxiRAB12BbOnACwDGjYAGEAvgAJOeLvCndeg4QBExIMaXSZc+QigBM5KrUYs2nHvyENRajVux4CRQ-uP1mrRB3b0ATjBo2AzO9iAYjrpEZG7UHmbeForWwKrqxjBQAObwRKAAZn4QXEhkIDgQSACM1Ax0AEYwDAAK2k56IAww+TggcaZeIM0A+sBJVsLidpoghcWl1BVIAMz9nmwjYwoTNqrTBUUliIbllYirJuveACrqM3NHJ0uINZcJIABKdwfzx4tnZQYWDAgygdDgfEyfTegwAYukxEA
\begin{center}
\begin{tikzcd}
\mathcal{C} \times \mathcal{D} \arrow[rr, "P_{\mathcal{C}}"] \arrow[dd, "P_{\mathcal{D}}"] &  & \mathcal{C}                                                           \\
                                                                                           &  &                                                                       \\
\mathcal{D}                                                                                &  & \varepsilon \arrow[ll, "T"] \arrow[uu, "R"] \arrow[lluu, "F", dashed]
\end{tikzcd}
\end{center}


\begin{example}
给定两个函子$\func{F}{\sD}{\sC}$和$\func{G}{\sE}{\sC}$,可以构造一个逗号范畴(comma category) $F \downarrow G$:
	\begin{enumerate}
		\item 对象为三元组$(d \in \sD,e\in \sE,\func{f}{F(d)}{G(e)} \in \sC)$
		\item 态射$\qty{d,e,f} \rightarrow \qty{d',e',f'}$,用一个序对表示$\qty{\func{h}{d}{d'},\func{k}{e}{e'}}$，即下面正方形交换
		\[\xymatrix{
					F(d) \ar[d]_{F(h)} \ar[r]^{f} & G(e)\ar[d]^{G(k)}  \\
			F(d')\ar[r]_{f'} &G(e)'}\]
			$f'F(h) = G(k)f$
	\end{enumerate}
	同时定义了一对射影函子$\func{\dom}{F\downarrow G}{\sD}$ 和
	$\func{\cod}{F\downarrow G}{\sE}$	
\end{example}

首先我们要证明逗号范畴它确实是一个范畴，但这个范畴的出现就看起来非常突兀，但是它似乎非常有作用，能把不同的两个范畴弄到一个范畴里面。逗号范畴里面的态射统一用$\qty{\func{h}{d}{d'},\func{k}{e}{e'}} \qty{f,f'}$表示，后面的括号内容特殊标识态射的domain和codomain。

要说明它是一个范畴，首先我们定义它每个对象的单位态射和态射复合：

对于任意一个对象$\qty{d,e,f}$简写为$c$,那对应的单位态射，我们定义为\[ 1_c  = \qty{1_{d},1_{e}}\qty{f,f}\]其中$1_d$和$1_e$分别为$d$和$e$的单位态射，很自然的下面正方形交换
\[\xymatrix{ &Fd \ar[d]_{F1_{d}} \ar[r]^{f} & Ge\ar[d]^{G1_{e}}
						 \\  & Fd\ar[r]_{f} &Ge   } \]
$1_c$的domain和codomain都是$\qty{d,e,f}$

再定义态射复合，对于两个形如
$$\qty{\func{h}{d}{d_1},\func{k}{e}{e_1}} \qty{f,f_1} \AND
	\qty{\func{h}{d_1}{d_2},\func{k}{e_1}{e_2}} \qty{f_1,f_2}$$ 
表示为
$$\func{\al}{(d,e,f)}{(d_1,e_1,f_1)} \AND
	\func{\be}{(d_1,e_1,f_1)}{(d_2,e_2,f_2)}.$$ $\al$和$\be$的复合表示为
\[\be  \al=\qty{\func{h'  h}{d}{d_{2}},\func{k'  k}{e}{e_{2}}}\qty{f,f_2}\]用交换图表示为\[\xymatrix{ Fd \ar[d]_{Fh} \ar[r]^{f} & Ge\ar[d]^{Gk}  \\
			Fd_{1} \ar[d]_{Fh'}\ar[r]^{f_{1}}& Ge_{1} \ar[d]^{Gk'} \\
	Fd_{2} \ar[r]^{f_{2}} &Ge_2 } \]两个正方形交换图拼成了一个长方形交换图，也可以简化为一个正方形\[\xymatrix{ &Fd \ar[d]_{Fh'  Fh}\ar[r]^{f} & Ge\ar[d]^{Gk' Gk}
			 \\  & Fd_2\ar[r]^{f_2} &Ge_2 }\]
			 
完成了单位态射和态射复合的定义，现在需要证明单位态射左右消去律(其实就是证明我们构造的单位态射确实是单位态射)和态射复合的结合性。

用$\al$表示态射$\qty{\func{h}{d}{d'},\func{k}{e}{e'}} \qty{f,f'}$其中的domain和codomain分别表示$c$和$c'$,先证明$\al 1_x$:
\begin{align*}
	\al  1_{c } &= \qty{h 1_{d},k 1_{e}}\qty{f,f'}\\
	&= \qty{h,k}\qty{f,f'} \\
	 &= \al.
\end{align*}

接着证明$1_{c'}\al$:
\begin{align*}
	1_{c' } \al &= \qty{1_{d'} h, 1_{e'} k}\qty{f,f'}\\
	&= \qty{h,k}\qty{f,f'}\\
	&= \al.
\end{align*}

最后证明态射的结合性，这里定义三个态射$\al$,$\be$和$\gm$分别表示$\qty{\func{h}{d}{d_1},\func{k}{e}{e_1}}$,\\$\qty{\func{h_1}{d_1}{d_2},\func{k_1}{e_1}{e_2}}$和$\qty{\func{h_2}{d_2}{d_3},\func{k_2}{e_2}{e_3}}$:
\begin{align*}
	(\gm\be)\al&=((h_2h_1),(k_2 k_1))(f_1,f_3) \al\\
	&=((h_2 h_1) h,(k_2 k_1) k)(f,f_3)\\
	&=(h_2(h_1 h),k_2(k_1 k))(f,f_3)\\
	&=\gm((h_1 h),(k_1 k))(f,f_2)\\
	&=\gm(\be \al).
\end{align*}

我们已经证明了逗号范畴确实是一个范畴，接下来我们定义两个函子$\func{\dom}{F \downarrow G}{\sD}$ 和 $\func{\cod}{F \downarrow G}{\sE}$，还是从$F \downarrow G$中的对象和态射出发：
\begin{align*}
	\dom\qty{d,e,f} &= d, \dom\qty{h,k}\qty{f,f'} \;\;= h \\
	\cod\qty{d,e,f} &= e, \cod\qty{h,k}\qty{f,f'} \quad= k.
\end{align*}

有了定义之后还是和上面一样证明这两个函子确实是函子，这里我就不累述了，直接给出单位态射和态射复合结构的保持:\[\dom\qty{1_{d},1_{e}}\qty{f,f} = 1_d,\cod\qty{1_{d},1_{e}}\qty{f,f} =1_e \]和\[\dom(\be \al) = \dom\qty{h'  h,k'  k}\qty{f,f_2} =h'
	 h = \dom\be  \dom\al\] \[\cod(\be \al) = \cod \qty{h' h,k' k}\qty{f,f_2}=  k'
	 k = \cod\be\cod\al.\]
	 
\begin{example}
见识了逗号范畴的不可思议，它可以把两个不同的范畴弄到一起，也可以把两个范畴弄出来，现在来构造一个特殊逗号范畴，把逗号范畴特殊化为切片范畴$c/\sC$和$\sC/c$。
\end{example}

这个构造过程，当你把两张相关交互图放在一起比较的时候，你就会发现其实很容易。
\[ \xymatrix{&c\ar[dr]^g
		\ar[dl]_f& \\ x \ar[rr]_h && y } \] \[\xymatrix{
					F(d) \ar[d]_{F(h)} \ar[r]^{f} & G(e)\ar[d]^{G(k)}  \\
			F(d')\ar[r]_{f'} &G(e)'}\]上面第一张是$c/\sC$中描述态射的交换图，	 首先我们需要逗号范畴交换图里面四个箭头变成三个箭头并且固定$c$,所以逗号范畴中的函子$F$只能是一个顺序范畴$\mathbb{1}$的单位函子,让我们看看现在变成了什么\[\xymatrix{F(0) \ar[d]_{1_c} \ar[r]^{f} & G(e)\ar[d]^{G(k)}  \\F(0)\ar[r]_{f'} &G(e)'}\]然后我们再让$F(0)=c \in C$ \[\xymatrix{c \ar[d]_{1_c} \ar[r]^{f} & G(e)\ar[d]^{G(k)}  \\c\ar[r]_{f'} &G(e)'}\]看起来已经很接近了,这张图还是交换的，现在逗号范畴的对象变成了$\qty{0,e \in E,f}$,而态射变成了$\qty{\func{h}{0}{0},\func{k}{e}{e'}}(f,f')$,其中$0$和$1_0$可以省略代表固定了$c$。但是这里还是有两个范畴，而切片范畴只是由一个范畴构造而成，所以这里最好的选择就是把$G$当成$\sC$的一个单位态射$1_{\sC}$,我们已经可以画一条对角线了\[\xymatrix{c \ar[d]_{1_c} \ar[r]^{f} \ar[rd]^{f'1_c} & x\ar[d]^{k}  \\c\ar[r]_{f'} &y}\],这个特殊的逗号范畴已经很显然是一个切片范畴了。
			

函子的作用无疑是非常强大的，下面记录一下trivial函子的扩展

\begin{example}
$\func{\Conj}{Group}{Set}$是一个函子，$\Conj$作用在单个群上表示群共轭等价类的集合，在群里面两个元素如果是共轭的，表示为存在一个n使得$a=nbn^{-1}$成立，则称$a$和$b$共轭，很容易证明这个共轭关系是一个等价关系。当把$\Conj$作用在\emph{the category of groups}上时:
	\begin{itemize}
		\item 对任意的群$s$,\(\Conj s = \hat{s}\)
		\item 对任意的群同态\(\func{f}{s}{t}\),\(\func{\Conj f}{\hat{s}}{\hat{t}}\)对任意的\([x] \in \hat{s}\),\(\Conj f([x])=[f(x)]\)
	\end{itemize}
\end{example}

为了证明Conj确实可以扩展到一个函子，得说明几个东西，如果存在一个群同态$\func{f}{s}{t}$,$a,b \in s$,且$a$和$b$共轭,那么存在一个$n$,使得$a=nbn^{-1}$ \[f(a)=f(nbn^{-1})=f(n)f(b)f(n^{-1})=f(n)f(b)f(n)^{-1}\]所以群同态是保留元素共轭结构的，这说明如果$[a]=[b]$,则$[f(a)]=[f(b)]$, 上面$\Conj f$是well-defined。

还是老步骤，需要说明indentiy和composition的保留
\begin{itemize}
	\item 对应单位态射对任意的群$s$,对象$x \in s$ \[\Conj 1_s([x])=[1_s(x)]=[x]=1_{\hat{s}}([x])=1_{\Conj s}([x]).\]这个证明感觉很迷，感觉还是要从消去律出发，但是取的是任意的$x$似乎也能说明问题$\Conj 1_s = 1_{\Conj s}$.
	\item 让$f$和$g$表示两个可复合的态射$fg$,$[x] \in dom(f)$ \[\Conj g\Conj f([x])=\Conj g([f(x)])=[g(f(x))]=[gf(x)]=\Conj (gf([x])).\]
\end{itemize}

\subsection{Naturality}
\begin{definition}

\textbf{自然变换}（natural transformation）
设$\mathcal{C}$与$\mathcal{D}$是两个范畴，$F \colon \mathcal{C}\rightarrow \mathcal{D}$与$G \colon \mathcal{C} \rightarrow \mathcal{D}$,一个自然变换由下面箭头组成
\begin{itemize}
	\item 一个箭头 $\alpha_c \colon F_c \rightarrow G_c$表示对于每一个对象$c \in \mathcal{C}$,这些箭头的“collection”（注意没有用集合的概念）定义了自然变换的组成部分。
\end{itemize}
所有任意的态射$f \colon c \rightarrow c' \in \mathcal{C}$,下面图交换（$G(f)\alpha_{c}=\alpha_{c'}F(f)$）：
\begin{center}
% https://tikzcd.yichuanshen.de/#N4Igdg9gJgpgziAXAbVABwnAlgFyxMJZABgBpiBdUkANwEMAbAVxiRADEB9AYxAF9S6TLnyEUARnJVajFmwDiPfoJAZseAkTLjp9Zq0QdOwbgHI+yoetFFJO6nrmHFJ8-2kwoAc3hFQAMwAnCABbJDIQHAgkSRl9NgAdBMY0AAs6JQEA4LDECKikACZqBjoAIxgGAAVhDTEQQKwvVJwQB1kDDn9LECDQmOoCxABmdvjnbqzenKLB6JGS8sqa601DRubWsacQDNcLPgo+IA
\begin{tikzcd}
F_c \arrow[r, "\alpha_c"] \arrow[d, "Ff"'] & G_c \arrow[d, "Gf"] \\
F_{c'} \arrow[r, "a_{c'}"']                & G_{c'}             
\end{tikzcd}
\end{center}

\end{definition}
注意交换图里面的所有态射都属于$\mathcal{D}$，如果自然变换$\alpha \colon F \rightarrow G$满足对任意的$c \in ob\mathcal{C} , \alpha_{c}:F(A) \rightarrow G(A)$是一个同构，则称$\alpha$是$\textbf{自然同构}$(natural isomorphism) 

这个自然变换的定义看起来还是有一些抽象，如果在一个自然变换中，把对象$c$看成一个变量，$\alpha$的domain和codomain都可以用$c$来表示，而这些箭头是"collection"都是目标范畴的态射，所以定义可以形象的表示为
\begin{center}
$\alpha \colon ob\mathcal{C} \rightarrow Mor\mathcal{D}$
\end{center}

总体来说函子是研究范畴之间的对应关系，自然变换就是用来描述函子之间的对应关系，如何刻画自然变换的最小限制，就是一个有趣的问题，函子建立两个范畴之前的关系是通过范畴间对象和态射的映射来完成的，那么描述两个函子的之间关系也要从这两个方向出发，所以最小的限制条件就是上面的交换图，那么自然体现在什么方面呢？

有一个比较优雅的说法是这些箭头$X$是自然的，前面也说过这些箭头都是自然变换中目标范畴（target）的态射，如果这些态射的domain和codomain是两个函子由一个相同的源范畴里面的同一个对象$A$映射而来，就可以说这些箭头在$A$是自然的，如果源范畴里面存在以$A$为domain的态射，自然地，这个态射的codomain是否也存在这样一个自然的箭头呢？对于每一个object都有这样的箭头存在，就有了上面交换图的存在。说实在的自然的本质我觉得就是这些箭头都是目标范畴存在的态射，并不需要再去额外构造。

\begin{lemma}
设$F,G,H \colon \mathcal{C} \rightarrow \mathcal{D}$和$T \colon \mathcal{D} \rightarrow \mathcal{C}$是函子，$\alpha \colon F \rightarrow G, \beta \colon G \rightarrow H$是自然变换，则
\begin{itemize}
 \item $\beta\alpha \colon F \rightarrow H \colon c \mapsto(F(c) \xrightarrow{\beta_c\alpha_c} H(c))$是一个自然变换
 \begin{center}
% https://tikzcd.yichuanshen.de/#N4Igdg9gJgpgziAXAbVABwnAlgFyxMJZABgBpiBdUkANwEMAbAVxiRADEB9AYxAF9S6TLnyEUARnJVajFmwDiPfoJAZseAkQBMU6vWatEIABJKBQ9aKJlx0-XKNdg3AOR9lFkZomlbe2YYgis5uHqrCGmLIOn4yBmymIe580jBQAObwRKAAZgBOEAC2SGQgOBBIknEOIAA6tYxoABZ0Zir5RZXU5Ug6IAx0AEYwDAAKEVZGDDA5OCD+8Ub1wzitvOYgHcWIfT2IAKwLNcY5YVtIACzdFQdHgcswq5xJZwXbVXtX1YHypxvniAAzNdLnc2PVGi1nq5ku03iUQUCwY4-hQ+EA
	\begin{tikzcd}
F_c \arrow[r, "\alpha_c"] \arrow[d, "Ff"] & G_c \arrow[r, "\beta_c"] \arrow[d, "Gf"] & H_c \arrow[d, "Hf"] \\
F_{c'} \arrow[r, "\alpha_{c'}"]           & G_{c'} \arrow[r, "\beta_{c'}"]           & H_{c'}             
	\end{tikzcd}
 \end{center}
	\item $\alpha T \colon FT \rightarrow GT \colon c' \mapsto (FT(c') \xrightarrow{\alpha_{T(c')}} GT(c'))$是一个自然变换
	\item $T\alpha \colon TF \rightarrow TG \colon c \mapsto (TF(c) \xrightarrow{T(\alpha_{c})} TG(c))$是一个自然变换
\end{itemize}
\end{lemma}


上面这个第一个结论是一个很显然的结论，两个交换图拼在一起还是一张交换图,所以自然变换之间是可以进行复合运算的，特殊地，每个函子$F$都存在一个自身到自身单位自然变换$1_F \colon F \rightarrow F$,其实除了上面第一个结论之外还有两个$\alpha T$和$T\alpha$函子和自然变换的复合我没有看懂，似乎domain和codamin都是函子复合。

如果$\mathcal{C}$和$\mathcal{D}$都是小范畴，则以范畴$\mathcal{C}$到范畴$\mathcal{D}$的所有函子为对象，以自然变换为态射可以形成一个范畴$[\mathcal{C},\mathcal{D}]$,称为$\textbf{函子范畴}$。

\begin{example}
设 $P \colon Set \rightarrow Set $是幂集函子，它和单位函子$1_{Set}$构成一个自然变换，因为下图交换
\begin{center}
% https://tikzcd.yichuanshen.de/#N4Igdg9gJgpgziAXAbVABwnAlgFyxMJZABgBpiBdUkANwEMAbAVxiRAEEQBfU9TXfIRQAmclVqMWbAAoAKdgEpuvEBmx4CRMsPH1mrRCABCyvusFFRO6nqmG5RpV3EwoAc3hFQAMwBOEAFskMhAcCCQARhtJAxAAHTiAIxgcOgB9Th4ffyDEELCkURAGOmSGaX4NIRBfLDcACxwQaP02b1MQP0DC6gLEAGYWu3iklPSTLM6cyN7wgaHYuW8nCi4gA
\begin{tikzcd}
A \arrow[rr, "\beta_A"] \arrow[dd, "f"'] &  & P(A) \arrow[dd, "P(f)"] \\
                                         &  &                         \\
B \arrow[rr, "\beta_B"]                  &  & P(B)                   
\end{tikzcd}
\end{center}
\end{example}
我在想这和函子$P$的定义有什么区别?注意这里$\beta_A$是集合元素之间的映射对任意的$x \in A$有$x \mapsto \{x\} \in P(A)$，而不是函子定义的对象映射,这里存在的自然变换是$\alpha \colon 1_{Set} \rightarrow P$,其中$1_{Set}$是范畴$Set$的单位函子。

\subsection{Equivalence of categories}

\begin{definition}
设$\func{F}{\cat{C}}{\cat{D}}$是一个函子，如果存在函子$\func{G}{\cat{D}}{\cat{C}}$及自然同构$\func{\al}{1_{\cat{C}}}{GF}$和$\func{\be}{1_{\cat{D}}}{FG}$,则称函子$F$是一个等价（equivalence）

% https://tikzcd.yichuanshen.de/#N4Igdg9gJgpgziAXAbVABwnAlgFyxMJZABgBpiBdUkANwEMAbAVxiRAGMQBfU9TXfIRRkAjFVqMWbdgHJuvEBmx4CREeXH1mrRCADiAMQAU7AJTy+ywWtJjqWqbsMmZ5npYGqUAZg33JOiBQFor8KkLIvnYS2mxQcu6hVl7IACx+MY4gBnpGUG4KSp4R6dEOgTl5buIwUADm8ESgAGYAThAAtkhkIDgQSOogDHQARjAMAAph1rqtWHUAFjgg-rG6zSFtnd3UfUgATKtZADrHjGgLdAD6nIlbXYiDe4i+Q6PjU8lCIHOLy0eBU7nS5XYCyLibdoPQ69fovAFsZzNAotKFIdKwpAAVmowzGk2mXh+8yWK0ygTqkO2iAxzwAbAjdKcxjhrsE7mjEDjMYgAOy494Er5sX6kxkgZkwVmg+IQjnUhk8-lvfGfYpsBgwZr-clsSp1apcIA
\begin{center}
\begin{tikzcd}
c \arrow[d, "f"'] \arrow[r, "\alpha_c"] & GF(c) \arrow[d, "GF(f)"] &  & d \arrow[d, "g"'] \arrow[r, "\beta_d"] & FG(d) \arrow[d, "FG(g)"] \\
c' \arrow[r, "\alpha_{c'}"']            & GF(c')                   &  & d' \arrow[r, "\beta_{d'}"']            & FG(d)                   
\end{tikzcd}
\end{center}


如果存在等价函子$\func{F}{\cat{C}}{\cat{D}}$,则称范畴$\cat{C}$与范畴$\cat{D}$是等价的范畴（equivalent categories）。

如果范畴$\cat{C}$和范畴$\cat{D}^{op}$等价，则称$\cat{C}$与$\cat{D}$是对偶等价的范畴（dual equivalent categories）。
\end{definition}

由于函子保持对象的同构，很容易证明范畴的等价构成了范畴之间的一个等价关系。回忆两个范畴同构的概念是指两个范畴具有完全相同的结构，但是实际应用中我们并不需要如此强的条件，等价范畴是利用自然变换给出范畴之间一种较弱的相同性。

\begin{definition}
定义一个函子$\func{F}{\cat{C}}{\cat{D}}$
	\begin{itemize}
		\item 如果对任意的$x,y \in \cat{C}$,给定的$\cat{C}(x,y) \rightarrow \cat{D}(F(x),F(y))$映射是一个满射，则这个函子是\tbf{局部满,完全的，完满的}（full）
		\item 如果对任意的$x,y \in \cat{C}$,给定的$\cat{C}(x,y) \rightarrow \cat{D}(F(x),F(y))$映射是一个单射，则这个函子是\tbf{局部单，忠实的}（faithful）
		\item 如果对任意的对象$d \in \cat{D}$,都有一个对象$c \in \cat{C}$,使得$F(c)$与$d$同构，则这个函子是\tbf{稠密的}（essentially surjective on objects）
	\end{itemize}
\end{definition}

注意full和faithful 都是相对两个范畴的hom-set来说的，所以它们都是局部条件（local condition）。在局部条件上再增强一下，如果一个函子是\tbf{嵌入}（embedding）是指如果一个faithful funtor函子，且对对象的作用也是单射，这种情况下，函子的domain范畴其实就是codomain范畴的一个子范畴，就把局部条件上升为了全局条件作用在所有箭头上。

\begin{theorem}
如果一个函子是等价的，当且仅当这个函子是faithful，full，essentially surjective on objects(dense)。
\end{theorem}

在证明这个定理之前，需要提出一个小lemma

\begin{lemma}
对于态射$\func{f}{a}{b}$和同构$a \cong a'$,$b \cong b'$,可以唯一确定态射$\func{f'}{a'}{b'}$,等价地下面四个交换图
\[\xymatrix{
	a\ar[d]_{f} & a'\ar[l]_{\cong}\ar[d]^{f'} &
	a\ar[d]_{f}\ar[r]^{\cong} & a'\ar[d]^{f'} &
	a\ar[d]_{f} & a'\ar[l]_{\cong}\ar[d]^{f'} &
	a\ar[d]_{f}\ar[r]^{\cong} & a'\ar[d]^{f'} \\
	b\ar[r]_{\cong} & b' &
	b\ar[r]_{\cong} & b' &
	b & b'\ar[l]^{\cong} &
	b & b'\ar[l]^{\cong}
	}\]
\end{lemma}
从这几个交换图上我们已经很容易构造出$f'$了,简单描述一下，定义$\func{\al}{a}{a'}$和$\func{\be}{b}{b'}$,反之它们的逆用$\al^{-1}$和$\be^{-1}$表示。第一个最为直观$f'=\be f \al^{-1}$

开始证明定理3.3。($\Longrightarrow$) 给定$\func{F}{\cat{C}}{\cat{D}}$，$\func{G}{\cat{D}}{\cat{C}}$，$\isom{\eta}{1_{\cat{C}}}{GF}$，$\isom{\mu}{1_{\cat{D}}}{FG}$定义了一个范畴间的等价关系。对于任意的$d \in D$，有$\isom{\mu_d}{FG(d)}{d}$，取$c=G(d)$,显然$F$是稠密的。再考虑两个并行的态射$\pfunc{f,g}{c}{c'}$,如果$F(f)=F(g)$,则$f$和$g$同时满足下面交换图
\[\xymatrix{
	c\ar[d]_{f\ or\ g}\ar[r]_{\cong}^{\eta_c} & GF(c)\ar[d]^{GF(f)=GF(g)}\\
	c'\ar[r]_{\eta_{c'}}^{\cong} & GF(c')
	}\]	根据lemma3.4，$c \rightarrow c'$是唯一确定的，所有$f=g$,因此$F$是一个单射.对称地，考虑$\func{f}{d}{d}$和同构$\mu_{d}$，$\mu_{d'}$,可以唯一确定$\func{k}{G(d)}{G(d')} \in \Hom_\cat{C}(X,Y) $\[\xymatrix{
	d\ar[d]_{f}\ar[r]_{\cong}^{\mu_d} & FG(d)\ar[d]^{Fk}\\
	d'\ar[r]_{\mu_{d'}}^{\cong} & FG(d')
	}\],所以F是满射。
	
($\Longleftarrow$) 这个方向证明，我在怎么用dense这个性质的时候想了很久，最后突然发现一句“由选择公理”就完了，就完了，是的，你没有听错...

任取$d \in \cat{D}$，由dense性质和选择公理,是可以构造一个$\isom{\mu_d}{FG(d)}{d}$,在dense下选一个$c$,让$G(d)=c$.对象映射处理好了，就可以来构造一个交换图了
		
\begin{center}		
% https://tikzcd.yichuanshen.de/#N4Igdg9gJgpgziAXAbVABwnAlgFyxMJZABgBpiBdUkANwEMAbAVxiRADEBxACigEoQAX1LpMufIRQAmclVqMWbKEJEgM2PASJkpc+s1aIOPKAHIBw0RolEZu6vsVGzQuTCgBzeEVAAzAE4QALZIZCA4EEgy8gZsXL4g1Ax0AEYwDAAKYpqSIP5YHgAWOIkgDFhghiBQdHCF7ip+gSGIYRFIAIwOClUAOr1BTAD6ykmp6VnWWkYMML4lliABwZ3U7YgAzN2xRgljaZnZNjNzC6rLLdHrW2Xjh1O5+UUl204g-YNDwGaCroJAA
\begin{tikzcd}
FG(d) \arrow[dd, "FGg"', dashed] \arrow[rr, "\mu_d"] &  & d \arrow[dd, "g"] \\
                                                     &  &                   \\
FG(d') \arrow[rr, "\mu_{d'}"']                       &  & d'               
\end{tikzcd}
\end{center}

任取范畴$D$中一个态射$\func{g}{d}{d'}$,$\mu_d$和$\mu_d'$都是同构，所以可以上面的lemma可以唯一确定一个$FGg$。因为$F$是faithful，所以换个角度看$G(d) \rightarrow G(d')$也是唯一的，现在$\Func{\mu}{FG}{1_D}$里面所有的component都是可以确定一个交换图的，且都是同构的，但是这里有一个问题，我们用选择公理弄了上面这样一个$G$出来，我们并没有证明它确实是一个函子，还少一步验证它对态射作用，首先是单位态射，我们有下面这个交换图
\begin{center}
% https://tikzcd.yichuanshen.de/#N4Igdg9gJgpgziAXAbVABwnAlgFyxMJZABgBpiBdUkANwEMAbAVxiRADEBxACigEoQAX1LpMufIRQAmclVqMWbKEJEgM2PASJkpc+s1aIOPfitEaJRGbur7FR5YLkwoAc3hFQAMwBOEALZIZCA4EEgAjLYKhiAAOrH+TAD6ytQMdABGMAwACmKakiAMMF44ZiC+AUHUoUgy8gZsXNzhKXwABPE4MAAeOMDtED7tgu3srcAmfIIgaZnZeRZaRj5YrgAWZcLefoGIkSFhiADMUY1GralF87n5lkbFpeWVe-W1J2f2IMnAUADkMzmWVuS0Kqw2WwogiAA
\begin{tikzcd}
FG(d) \arrow[rr, "\mu_d"] \arrow[dd, "FG(1_d) \text{ or } F1_{G(d)}"'] &  & d \arrow[dd, "1_d"] \\
                                                                       &  &                     \\
FG(d) \arrow[rr, "u_{d'}"']                                            &  & d                  
\end{tikzcd}
\end{center}

还是由前面的lemma和$F$上对态射的单射性质，这里有$G(1_d) = 1_{G(d)}$,相似地，再给一个态射$\func{f'}{d'}{d''}$,我们有下面的交换图

\begin{center}
% https://tikzcd.yichuanshen.de/#N4Igdg9gJgpgziAXAbVABwnAlgFyxMJZABgBpiBdUkANwEMAbAVxiRADEBxACigHIAlCAC+pdJlz5CKAEzkqtRizZQRYkBmx4CRMjIX1mrRBx79Ba8VqlE5+6oeUnzIhTCgBzeEVAAzAE4QALZIZCA4EEgAjA5KxiAAOglBTAD6qtQMdABGMAwAChLa0iAMML44liABwaHUEUhyikZsXNy+fL4CAARJODAAHjjA3RD+3cLd7Nw8DIJJAMZQEDjdswJCmTl5hdY6Jv5YHgAWlaJ+gSGIMeGRiADMW7kFRTYmZRUgsS0mHb5VNSuTQaD2+ThAaWA5mEX1K2xeexKhxOZwowiAA
\begin{tikzcd}
FG(d') \arrow[rr, "\mu_d"] \arrow[dd, "FG(g'g) \text{ or } F(G(g')\cdot G(g)"'] &  & d \arrow[dd, "g'g"] \\
                                                                                 &  &                     \\
FG(d'') \arrow[rr, "u_{d''}"']                                                   &  & d''                
\end{tikzcd}
\end{center}

这里有$G(g'g)=G(g')\cdot G(g)$.

现在已经完成了前一半的证明，接下来想一下如何构造$\Func{\eta}{GF}{1_c}$.并不能直接来构造，尝试构造下面的交换图
\begin{center}
% https://tikzcd.yichuanshen.de/#N4Igdg9gJgpgziAXAbVABwnAlgFyxMJZABgBpiBdUkANwEMAbAVxiRADEAKAYwEoQAvqXSZc+QigBM5KrUYs27AOJc+g4SAzY8BIgBYZ1es1aIOPfkJHbxRMpNnGFZ1QHJLGrWN1TSDo-KmHCo87urW3hLIBv5yJoqhlrIwUADm8ESgAGYAThAAtkhkIDgQSACMAfEuADo1MDh0APrc4SC5BRXUpUjSIAx0AEYwDAAKojoS-TBZOCBVziB1+UxNwKq8Am0dhYjFPYgAzNQDw2MTtmY5WKkAFnMLQexZ23m7lSVliAb9QyPjNh8IGudwecUWymer06iD6BwArCc-udAVMGDMwU4ni8rO03kgfgikWcAZE2CD7vNwUFlqt1oktridkhjp8CcT-hcgRTMYFFHUGs1gNxXIyKAIgA
\begin{tikzcd}
F(c) \arrow[rr, "F\eta_c"] \arrow[dd, "Ff"'] &  & FGF(c) \arrow[rr, "\mu_{F(c)}"] \arrow[dd, "FGFf"'] &  & F(c) \arrow[dd, "Ff"] \\
                                             &  &                                                     &  &                       \\
F(c') \arrow[rr, "F\eta_{c'}"']              &  & FGF(c') \arrow[rr, "\mu_{F(c')}"']                  &  & F(c')                
\end{tikzcd}
\end{center}
声明一下其中的几个定义，态射$\func{f}{c}{c'}$,两个component $\func{\eta_c}{c}{GF(c)}$, $\func{\eta'_c}{GF(c)}{c}$,把$F\eta_c$定义为$\mu^{-1}_{F(c)}$,这样做的目的是使得$F\eta_c  \cdot F\eta'_c=F(\eta_c\eta'_c) =\mu_{F(c)}\mu^{-1}_{F(c)}=1_{F(c)}=F(1_c)$，再反过来做一次就得到了同构$u$.

再看这个大长方形和两个小正方形的交换性，大长方形由上述定义交换，右边这个小正方形因为$\mu$是个自然同构，所以也是交换的，言下之意左边这个小正方形也是交换的。这两个小正方形带来的作用是什么？左边这个交换可以得到\[FGFf \cdot F\eta_c = F(GFf \cdot \eta_c) = F(\eta_{c'} \cdot f) = F\eta_{c'} \cdot Ff\]再由$F$的faithful性质，即有$GFf \cdot \eta_C = \eta_{c'} \cdot f$,这个等式就表示下面的图交换

\begin{center}
% https://tikzcd.yichuanshen.de/#N4Igdg9gJgpgziAXAbVABwnAlgFyxMJZABgBpiBdUkANwEMAbAVxiRAGMQBfU9TXfIRRkATFVqMWbdgHJuvEBmx4CREeXH1mrRCADiAMQAU7AJTy+ywWtJjqWqbsMmZ5ruJhQA5vCKgAZgBOEAC2SGQgOBBI6hLabAA6CTA4dAD6nDwBwWGIsVFIAMz2kjr6Bv4WIEGhSACM1AWIxSAMdABGMAwACvwqQiCBWF4AFjggJfG6SSnpslU1uRFNDa0dXb1WqrpDo+OTjtXcFFxAA
\begin{tikzcd}
c \arrow[rr, "\eta_c"] \arrow[dd, "f"'] &  & GF(c) \arrow[dd, "GFf"] \\
                                        &  &                         \\
c' \arrow[rr, "\eta_c'"']               &  & GF(c')                 
\end{tikzcd}	
\end{center}

将近拖了半个月的证明，终于证完了，选择公理的应用和间接构造自然同构，还是得在细细想想...
\end{document}
